@import "nib"
@import "easing"
@import url(http://fonts.googleapis.com/css?family=Exo:400,700,800italic);

color-green = #13bbc9
color-white = white

border-left-radius(val)
    border-top-left-radius val
    border-bottom-left-radius val

border-right-radius(val)
    border-top-right-radius val
    border-bottom-right-radius val

square(width)
    width: width
    height: width

glow()
    border: 1px solid color-green
    inner-glow = 0 0 10px color-green inset
    outer-glow = 0 0 10px rgba(color-green, 0.5)
    box-shadow: inner-glow, outer-glow

glow-text()
    outer-glow = 0 0 10px color-green
    shadow = 0 0 5px color-green
    text-shadow outer-glow, shadow

bold-text()
    font-weight: 600

reset()
    margin 0
    padding 0

button()
    cursor: pointer
    border-radius: 5px


body, html
    background: #222
    margin: 0
    padding: 0
    cursor default

body
    font-family: Exo, Helvetica Neue, Arial, sans-serif

canvas
    user-select: none
    -webkit-tap-highlight-color: transparent

.avatar
    background url(/images/avatars.png) top left no-repeat
    border-radius: 5px
    &.marine
        background-position -7px -6px
        &.alt
            background-position -55px -6px

#main
    user-select: none
    background: #111
    position: absolute
    font-size: 14px
    overflow: hidden
    width 960px
    height 640px
    //background: url(/media/background.png) top left no-repeat

#game
    display: inline-block

.title
    color white
    font-weight: bold
    font-size: 12px
    glow-text()

#turn-list
    position absolute
    bottom 15px
    right 15px
    height 42px
    transition 400ms

    &.hidden
        bottom: -30px - 42px

    ul
        margin 0
        padding 0

    .title
        position absolute
        top -25px
        left 0
        text-transform uppercase

    .unit
    li
        vertical-align top
        background-color black
        display inline-block
        margin-right: 5px
        transition 400ms
        square(30px)
        glow()

        &:first-child
            square(40px)
            border-color white

        &.leaving
            square(0)
            opacity: 0
            margin-left: -5px

#ui
    z-index: 1

    .preloader
        position: absolute
        width: 100%
        height: 100%
        background-color: black

        &.hidden
            visibility: hidden

        .border
        .bar
            background: #111
            position: absolute
            top: 50%
            left: 10px
            right: 10px
            height: 3px
            border: 1px solid rgba(white, 0.12)
            margin-top: -15px
            border-radius: 3px

        .bar
            background-color: white
            border-color: transparent
            box-shadow: 0 0 10px 1px #33aaa3
            z-index: 1
            transition: 600ms

    #unit-actions
        glow()
        font-size: 12px
        text-transform: uppercase
        color: color-green
        background: black
        width: 500px
        height: 40px
        z-index: 2
        position: absolute
        bottom: 15px
        left: 15px
        transition: 400ms
        border-radius: 5px

        &.hidden
            transform: translatey(200%);

        > .title
            position: absolute
            top: -25px
            left: 0px

        .avatar
            glow()
            background-color: black
            width: 28px
            height: 28px
            position: absolute
            left: 5px
            top: 5px
            overflow: hidden

        .health
            position: absolute
            left: 55px
            top: 11px

            .label
                float: left
                margin-right: 5px

            .value
                float: left
                color: color-white
                font-weight: 600

        .actions
            position: absolute
            left: 145px
            top: 11px
            height: 16px

            .title
                line-height: 16px
                height: 16px
                float: left
                font-weight normal
                font-size: inherit
                color inherit

            .bars
                margin-left: 5px
                float: left
                width 130px

            .bar
                glow()
                box-sizing: border-box
                width: 0
                height: 16px
                background: rgba(color-green, 0.5)
                float: left
                border: 1px solid color-green
                &:not(:first-child)
                    border-left-color: black

                &:first-child
                    border-left-radius(5px)

                &:last-child
                    border-right-radius(5px)

                &.empty
                    opacity: 0.25
                    //animation: pop-then-fade-out 500ms forwards

        .commands
            position: absolute
            top: 5px
            right: 5px

            .command
                bold-text()
                button()
                border: 1px solid color-green
                padding: 5px
                background: rgba(color-green, 0.15)
                float: left
                margin-left: 2px
                transition: 200ms
                box-shadow: 0 0 10px color-green inset
                &:hover
                    background: rgba(color-green, 0.5)
                    color: color-white
//
#victory-message
    position absolute
    top 0
    right 0
    left 0
    height 200px
    background linear-gradient(top, black, transparent)
    z-index 4
    color white
    margin-top: -200px
    transition 500ms

    &.lost
        .message
            color red

    &.active
        display block
        margin-top 0

        .logo
        .message
            transform rotatex(0) scale(1)
            opacity 1

        .find.game
            transform rotatex(0)
            opacity 1

    .logo
        background-image url(/images/logo.png)
        background-position 0 0
        width = 202px
        height = 158px
        width width
        height height
        position absolute
        top 30px
        left 50%
        margin-left width * -0.5
        transform rotatey(90deg) scale(2)
        transition 1000ms 300ms
        opacity 0

    .message
        text-align center
        position absolute
        left 0
        right 0
        top 90px
        font-size 36px
        font-weight 100
        text-shadow 0 0 20px color-green
        transform rotatex(90deg) scale(2)
        transition 1200ms 400ms easeOutExpo
        opacity 0

    .find.game
        width 150px
        text-align center
        padding 5px 5px
        box-sizing border-box
        position absolute
        font-size 12px
        top 140px
        left 50%
        margin-left -75px
        color white
        font-weight bold
        text-transform uppercase
        background rgba(black, 0.5)
        text-decoration none
        button()
        glow()
        transform rotatex(90deg) scale(2)
        transition 1200ms 450ms
        opacity 0

        &:hover
            color white
            background black

#modal-message
    box-shadow 0 0 65px color-green inset
    background rgba(#223237, 0.85)
    color white
    position absolute
    top 0
    right 0
    bottom 0
    left 0
    z-index 3

    &.hidden
        display none

    ul.logs
        position absolute
        color color-green
        font-size 14px
        reset()
        left 30px
        bottom 30px

        li
            reset()
            display block
            list-style none
            font-style italic
            font-weight normal
            font-size 12px
            border-left 5px solid rgba(color-green, 0.25)
            padding-left 10px
            margin-bottom 10px
            height = 12px
            height height
            line-height height
            opacity 0.6

            &:last-child
                font-size 14px
                font-style normal
                font-weight bold
                opacity 1
                animation modal-list-item-last 400ms infinite alternate

//----------------------------
// mobile message
//----------------------------
#mobile-message
    background black
    position absolute
    z-index 9999
    top 0
    right 0
    bottom 0
    left 0
    color white
    display none
    padding 10px
    padding-top 20%
    text-align center
    font-size 200%
    line-height 100%
    vertical-align middle
    &.hidden
        display none

//----------------------------
// Add to homescreen
//----------------------------
#add-to-homescreen
    position absolute
    padding 10px
    z-index: 99999
    left 10px
    right 10px
    bottom 10px
    text-align center
    border-radius 10px
    color white
    background-image: linear-gradient(top, #333, black)
    border-top 1px solid rgba(white, 0.5)
    border-bottom 1px solid rgba(white, 0.15)
    box-sizing: border-box
    text-shadow: 0 -1px 1px black
    &.hidden
        display none


// animations
@keyframes modal-list-item-last
    from
        border-left-color color-green
    to
        border-left-color transparent


@keyframes pop-then-fade-out
    0%
        transform: scale(1)
    50%
        transform: scale(1.2)
    100%
        transform: scale(1)
        opacity: 0.25

//----------------------------
// mediaqueries
//----------------------------
@media screen and (orientation:portrait)
    #mobile-message
        display block
    #main
        display none

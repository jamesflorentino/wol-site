@import "nib"
@import "easing"
@import "/images/spritesheets/icons.css"

color-green = #13bbc9
color-white = white
font-title = 'Orbitron'
font-body = 'Orbitron', sans-serif

filter(val)
    -webkit-filter val
    -moz-filter val
    -ms-filter val
    -o-filter val
    filter val

border-left-radius(val)
    border-top-left-radius val
    border-bottom-left-radius val

border-right-radius(val)
    border-top-right-radius val
    border-bottom-right-radius val

square(width)
    width: width
    height: width

glow()
    border: 1px solid color-green
    inner-glow = 0 0 10px color-green inset
    outer-glow = 0 0 10px rgba(color-green, 0.5)
    box-shadow: inner-glow, outer-glow

glow-text()
    outer-glow = 0 0 10px color-green
    shadow = 0 0 5px color-green
    text-shadow outer-glow, shadow

bold-text()
    font-weight: 600

reset()
    margin 0
    padding 0

button()
    cursor: pointer
    border-radius: 5px


body, html
    background: #222
    margin: 0
    padding: 0
    cursor default

body
    font-family: font-body

canvas
    user-select: none
    -webkit-tap-highlight-color: transparent

.avatar
    background url(/images/avatars.png) top left no-repeat
    border-radius: 5px
    &.marine
        background-position -7px -6px
        &.alt
            background-position -55px -6px

#main
    user-select: none
    background: #111
    position: absolute
    font-size: 14px
    overflow: hidden
    width 960px
    height 640px
    //background: url(/media/background.png) top left no-repeat

#game
    display: inline-block

    canvas
        filter(brightness(-0.05))
        transition 1000ms 1500ms
        &.active
            filter(brightness(0))

.title
    color white
    font-weight: bold
    font-size: 12px
    glow-text()

#turn-list
    position absolute
    bottom 15px
    right 15px
    height 42px
    transition 400ms

    &.hidden
        bottom: -30px - 42px

    ul
        margin 0
        padding 0

    .title
        position absolute
        top -25px
        left 0
        text-transform uppercase

    .unit
    li
        vertical-align top
        background-color black
        display inline-block
        margin-right: 5px
        transition 400ms
        square(30px)
        glow()

        &:first-child
            square(40px)
            border-color white

        &.leaving
            square(0)
            opacity: 0
            margin-left: -5px

//----------------------------
// Main UI container
//----------------------------
#ui
    z-index: 1
//----------------------------
// Preloader
//----------------------------
#preloader
    position: absolute
    width: 100%
    height 0
    z-index 3
    border none
    pointer-events none

    .border
    .bar
        background: rgba(color-green, 0.25)
        width 155px
        height: 1px

    .message
    .border
        position: absolute
        z-index 1
        top 278px
        left 399px

    .bar
        background-color cyan
        border-color: transparent
        box-shadow: 0 0 10px cyan
        z-index: 1
        transition: 600ms
        transform-origin 0 0
        width 100%

    .message
        color white
        font-size 10px
        font-style italic
        text-transform uppercase
        text-shadow 0 0 5px cyan
        width 155px
        top 332px
        letter-spacing 1px
        text-align center

    .top
    .bottom
        position relative
        transition 1200ms easeInQuint

    .bottom
        top -15px

    &.hidden
        .border
            display none
        .top
            transform translatey(-100%)

        .bottom
            transform translatey(101%)

//----------------------------
// Unit actions
//----------------------------
#unit-actions
    glow()
    font-size: 12px
    text-transform: uppercase
    color: color-green
    background: black
    width: 500px
    height: 40px
    z-index: 2
    position: absolute
    bottom: 15px
    left: 15px
    transition: 400ms
    border-radius: 5px

    &.hidden
        transform: translatey(200%);

    > .title
        position: absolute
        top: -25px
        left: 0px

    .avatar
        glow()
        background-color: black
        width: 28px
        height: 28px
        position: absolute
        left: 5px
        top: 5px
        overflow: hidden

    .health
        position: absolute
        left: 45px
        top: 15px

        .label
            float: left
            margin-right: 5px

        .value
            float: left
            color: color-white
            font-weight: 600

    .actions
        position: absolute
        left: 145px
        top: 11px
        height: 16px

        .title
            line-height: 16px
            height: 16px
            float: left
            font-weight normal
            font-size: inherit
            color inherit

        .bars
            margin-left: 5px
            float: left
            width 130px

        .bar
            glow()
            box-sizing: border-box
            width: 0
            height: 16px
            background: rgba(color-green, 0.5)
            float: left
            border: 1px solid color-green
            &:not(:first-child)
                border-left-color: black

            &:first-child
                border-left-radius(5px)

            &:last-child
                border-right-radius(5px)

            &.empty
                opacity: 0.25
                //animation: pop-then-fade-out 500ms forwards

    .commands
        position: absolute
        top: 4px
        right: 5px

        .command
            bold-text()
            button()
            height 30px
            line-height 30px
            border: 1px solid color-green
            padding: 0 6px
            background: rgba(color-green, 0.15)
            float: left
            margin: 0
            margin-left: 2px
            transition: 200ms
            box-shadow: 0 0 10px color-green inset
            font-weight bold
            &:hover
                background: rgba(color-green, 0.5)
                color: color-white

//----------------------------
// victory modal
//----------------------------
#victory-message
    position absolute
    top 0
    right 0
    left 0
    height 200px
    z-index 5
    color white
    perspective 1200px
    display none
    background linear-gradient(top, black, transparent)

    &.lost
        .message
            color red
            text-shadow 0 0 10px red

    &.active
        display block
        ease = easeInOutExpo
        .logo
            transform translateZ(1000px)
            animation 1200ms zoom-in-from-dark ease forwards
        .message
            transform translateZ(1000px)
            visibility hidden
            animation 1200ms 300ms zoom-in ease forwards
        .find
            visibility hidden
            animation 900ms 1200ms flash-in-fade forwards

    .logo
        position absolute
        left 342px
        top 20px

    .message
        text-align center
        position absolute
        left 0
        right 0
        top 120px
        font-size 18px
        font-weight bold
        text-transform uppercase
        glow = 0 0 20px #6dcff6
        text-shadow glow, 0 0 40px #6dcff6
        z-index 1

    .find.game
        width 200px
        text-align center
        padding 5px 5px
        box-sizing border-box
        position absolute
        font-size 10px
        font-weight 100
        letter-spacing 1px
        top 150px
        left 380px
        color #c4eeff
        text-transform uppercase
        background rgba(black, 0.85)
        text-decoration none
        button()
        glow()
        text-shadow 0 0 5px cyan
        transform translate(0,0)
        opacity 0.99
        z-index 1

        &:hover
            color white
            background black

#modal-message
    color white
    position absolute
    z-index 4
    left 170px
    transition 1200ms 300ms easeInOutQuint

    &.hidden
        transform translateY(-100%)

    .log-container
        position absolute
        left 115px
        top 70px
        width 375px
        height 120px
        overflow hidden

    ul.logs
        position absolute
        color color-green
        text-shadow 0 0 10px color-green
        reset()
        bottom 0
        font-size 12px

        li
            reset()
            display block
            list-style none
            font-family "Droid Sans Mono"
            padding-left 10px
            margin-bottom 5px
            height = 12px
            height height
            line-height height
            opacity 0.6
            &:before
                content "\2234"
                margin-right 10px
                display inline
                animation 1000ms fade-in-out alternate infinite

            &:last-child
                opacity 0.99
                &:after
                    content "\220E"

//----------------------------
// Players
//----------------------------
#players
    position absolute
    top 10px
    left 10px
    right 10px
    height 30px
    line-height 30px
    z-index 99
    color white
    font-weight bold
    border-radius 5px
    transition 1000ms easeOutBack
    background rgba(black, 0.75)
    glow()

    .sprite
        margin 0 5px
    .center
        margin auto
        width 50%
        text-align center
    .left
        position absolute
        left 10px
        top 0
    .right
        position absolute
        right 10px
        top 0
    &.hidden
        transform translateY(-50px)

//----------------------------
// mobile message
//----------------------------
#mobile-message
    background black
    position absolute
    z-index 9999
    top 0
    right 0
    bottom 0
    left 0
    color white
    display none
    padding 10px
    padding-top 20%
    text-align center
    font-size 200%
    line-height 100%
    vertical-align middle
    &.hidden
        display none

//----------------------------
// Add to homescreen
//----------------------------
#add-to-homescreen
    position absolute
    padding 10px
    z-index: 99999
    left 10px
    right 10px
    bottom 10px
    text-align center
    border-radius 10px
    color white
    background-image: linear-gradient(top, #333, black)
    border-top 1px solid rgba(white, 0.5)
    border-bottom 1px solid rgba(white, 0.15)
    box-sizing: border-box
    text-shadow: 0 -1px 1px black
    &.hidden
        display none

//----------------------------
// Animations
//----------------------------
@keyframes modal-list-item-last
    from
        border-left-color color-green
    to
        border-left-color transparent

//----------------------------
// Animation: pop-then-fade-out
//----------------------------
@keyframes pop-then-fade-out
    0%
        transform: scale(1)
    50%
        transform: scale(1.2)
    100%
        transform: scale(1)
        opacity: 0.25

@keyframes rotate-y-axis
    from
        transform rotateY(90deg)
    to
        transform rotateY(0deg)

@keyframes fade-in-out
    from
        opacity 0
    to
        opacity 1


@keyframes zoom-in-from-dark
    from
        transform translateZ(1000px)
        opacity 0
        filter(brightness(-1))
    to
        transform translateZ(0)
        opacity 1
        filter(brightness(0))

@keyframes zoom-in
    from
        transform translateZ(100%) translateY(100%)
        opacity 0
        visibility visible
    to
        transform translateZ(0) translateY(0)
        visibility visible
        opacity 1

@keyframes flash-in-fade
    0%
        transform scale(0)
        visibility visible
    25%
        transform scale(1)
        filter(brightness(0.5) hue-rotate(-20deg))
    50%
        transform scale(1.05)
    100%
        transform scale(1)
        filter(brightness(0) hue-rotate(0))
        visibility visible



//----------------------------
// other mediaqueries
//----------------------------
@media screen and (orientation:portrait)
    #mobile-message
        display block
    #main
        display none

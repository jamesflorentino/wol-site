var requirejs,require,define;
(function(Z){function x(b){return J.call(b)==="[object Function]"}function E(b){return J.call(b)==="[object Array]"}function o(b,e){if(b){var f;for(f=0;f<b.length;f+=1)if(b[f]&&e(b[f],f,b))break}}function M(b,e){if(b){var f;for(f=b.length-1;f>-1;f-=1)if(b[f]&&e(b[f],f,b))break}}function y(b,e){for(var f in b)if(b.hasOwnProperty(f)&&e(b[f],f))break}function N(b,e,f,h){e&&y(e,function(e,j){if(f||!F.call(b,j))h&&typeof e!=="string"?(b[j]||(b[j]={}),N(b[j],e,f,h)):b[j]=e});return b}function t(b,e){return function(){return e.apply(b,
arguments)}}function $(b){if(!b)return b;var e=Z;o(b.split("."),function(b){e=e[b]});return e}function aa(b,e,f){return function(){var h=ga.call(arguments,0),c;if(f&&x(c=h[h.length-1]))c.__requireJsBuild=!0;h.push(e);return b.apply(null,h)}}function ba(b,e,f){o([["toUrl"],["undef"],["defined","requireDefined"],["specified","requireSpecified"]],function(h){var c=h[1]||h[0];b[h[0]]=e?aa(e[c],f):function(){var b=z[O];return b[c].apply(b,arguments)}})}function G(b,e,f,h){e=Error(e+"\nhttp://requirejs.org/docs/errors.html#"+
b);e.requireType=b;e.requireModules=h;if(f)e.originalError=f;return e}function ha(){if(H&&H.readyState==="interactive")return H;M(document.getElementsByTagName("script"),function(b){if(b.readyState==="interactive")return H=b});return H}var j,p,u,B,s,C,H,I,ca,da,ia=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,ja=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,ea=/\.js$/,ka=/^\.\//;p=Object.prototype;var J=p.toString,F=p.hasOwnProperty;p=Array.prototype;var ga=p.slice,la=p.splice,w=!!(typeof window!==
"undefined"&&navigator&&document),fa=!w&&typeof importScripts!=="undefined",ma=w&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,O="_",S=typeof opera!=="undefined"&&opera.toString()==="[object Opera]",z={},r={},P=[],K=!1;if(typeof define==="undefined"){if(typeof requirejs!=="undefined"){if(x(requirejs))return;r=requirejs;requirejs=void 0}typeof require!=="undefined"&&!x(require)&&(r=require,require=void 0);j=requirejs=function(b,e,f,h){var c,o=O;!E(b)&&typeof b!=="string"&&
(c=b,E(e)?(b=e,e=f,f=h):b=[]);if(c&&c.context)o=c.context;(h=z[o])||(h=z[o]=j.s.newContext(o));c&&h.configure(c);return h.require(b,e,f)};j.config=function(b){return j(b)};require||(require=j);j.version="2.0.6";j.jsExtRegExp=/^\/|:|\?|\.js$/;j.isBrowser=w;p=j.s={contexts:z,newContext:function(b){function e(a,d,k){var l,b,i,v,e,c,f,g=d&&d.split("/");l=g;var h=m.map,j=h&&h["*"];if(a&&a.charAt(0)===".")if(d){l=m.pkgs[d]?g=[d]:g.slice(0,g.length-1);d=a=l.concat(a.split("/"));for(l=0;d[l];l+=1)if(b=d[l],
b===".")d.splice(l,1),l-=1;else if(b==="..")if(l===1&&(d[2]===".."||d[0]===".."))break;else l>0&&(d.splice(l-1,2),l-=2);l=m.pkgs[d=a[0]];a=a.join("/");l&&a===d+"/"+l.main&&(a=d)}else a.indexOf("./")===0&&(a=a.substring(2));if(k&&(g||j)&&h){d=a.split("/");for(l=d.length;l>0;l-=1){i=d.slice(0,l).join("/");if(g)for(b=g.length;b>0;b-=1)if(k=h[g.slice(0,b).join("/")])if(k=k[i]){v=k;e=l;break}if(v)break;!c&&j&&j[i]&&(c=j[i],f=l)}!v&&c&&(v=c,e=f);v&&(d.splice(0,e,v),a=d.join("/"))}return a}function f(a){w&&
o(document.getElementsByTagName("script"),function(d){if(d.getAttribute("data-requiremodule")===a&&d.getAttribute("data-requirecontext")===g.contextName)return d.parentNode.removeChild(d),!0})}function h(a){var d=m.paths[a];if(d&&E(d)&&d.length>1)return f(a),d.shift(),g.undef(a),g.require([a]),!0}function c(a,d,k,l){var b,i,v=a?a.indexOf("!"):-1,c=null,f=d?d.name:null,h=a,j=!0,m="";a||(j=!1,a="_@r"+(M+=1));v!==-1&&(c=a.substring(0,v),a=a.substring(v+1,a.length));c&&(c=e(c,f,l),i=q[c]);a&&(c?m=i&&
i.normalize?i.normalize(a,function(a){return e(a,f,l)}):e(a,f,l):(m=e(a,f,l),b=g.nameToUrl(m)));a=c&&!i&&!k?"_unnormalized"+(O+=1):"";return{prefix:c,name:m,parentMap:d,unnormalized:!!a,url:b,originalName:h,isDefine:j,id:(c?c+"!"+m:m)+a}}function p(a){var d=a.id,k=n[d];k||(k=n[d]=new g.Module(a));return k}function r(a,d,k){var b=a.id,c=n[b];if(F.call(q,b)&&(!c||c.defineEmitComplete))d==="defined"&&k(q[b]);else p(a).on(d,k)}function A(a,d){var k=a.requireModules,b=!1;if(d)d(a);else if(o(k,function(d){if(d=
n[d])d.error=a,d.events.error&&(b=!0,d.emit("error",a))}),!b)j.onError(a)}function s(){P.length&&(la.apply(D,[D.length-1,0].concat(P)),P=[])}function u(a,d,k){a=a&&a.map;d=aa(k||g.require,a,d);ba(d,g,a);d.isBrowser=w;return d}function z(a){delete n[a];o(L,function(d,k){if(d.map.id===a)return L.splice(k,1),d.defined||(g.waitCount-=1),!0})}function B(a,d,k){var b=a.map.id,c=a.depMaps,i;if(a.inited){if(d[b])return a;d[b]=!0;o(c,function(a){var a=a.id,b=n[a];return!b||k[a]||!b.inited||!b.enabled?void 0:
i=B(b,d,k)});k[b]=!0;return i}}function C(a,d,b){var l=a.map.id,c=a.depMaps;if(a.inited&&a.map.isDefine){if(d[l])return q[l];d[l]=a;o(c,function(i){var i=i.id,c=n[i];!Q[i]&&c&&(!c.inited||!c.enabled?b[l]=!0:(c=C(c,d,b),b[i]||a.defineDepById(i,c)))});a.check(!0);return q[l]}}function I(a){a.check()}function T(){var a,d,b,l,c=(b=m.waitSeconds*1E3)&&g.startTime+b<(new Date).getTime(),i=[],e=!1,j=!0;if(!U){U=!0;y(n,function(b){a=b.map;d=a.id;if(b.enabled&&!b.error)if(!b.inited&&c)h(d)?e=l=!0:(i.push(d),
f(d));else if(!b.inited&&b.fetched&&a.isDefine&&(e=!0,!a.prefix))return j=!1});if(c&&i.length)return b=G("timeout","Load timeout for modules: "+i,null,i),b.contextName=g.contextName,A(b);j&&(o(L,function(a){if(!a.defined){var a=B(a,{},{}),d={};a&&(C(a,d,{}),y(d,I))}}),y(n,I));if((!c||l)&&e)if((w||fa)&&!V)V=setTimeout(function(){V=0;T()},50);U=!1}}function W(a){p(c(a[0],null,!0)).init(a[1],a[2])}function J(a){var a=a.currentTarget||a.srcElement,d=g.onScriptLoad;a.detachEvent&&!S?a.detachEvent("onreadystatechange",
d):a.removeEventListener("load",d,!1);d=g.onScriptError;a.detachEvent&&!S||a.removeEventListener("error",d,!1);return{node:a,id:a&&a.getAttribute("data-requiremodule")}}var U,X,g,Q,V,m={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{}},n={},Y={},D=[],q={},R={},M=1,O=1,L=[];Q={require:function(a){return u(a)},exports:function(a){a.usingExports=!0;if(a.map.isDefine)return a.exports=q[a.map.id]={}},module:function(a){return a.module={id:a.map.id,uri:a.map.url,config:function(){return m.config&&m.config[a.map.id]||
{}},exports:q[a.map.id]}}};X=function(a){this.events=Y[a.id]||{};this.map=a;this.shim=m.shim[a.id];this.depExports=[];this.depMaps=[];this.depMatched=[];this.pluginMaps={};this.depCount=0};X.prototype={init:function(a,d,b,c){c=c||{};if(!this.inited){this.factory=d;if(b)this.on("error",b);else this.events.error&&(b=t(this,function(a){this.emit("error",a)}));this.depMaps=a&&a.slice(0);this.depMaps.rjsSkipMap=a.rjsSkipMap;this.errback=b;this.inited=!0;this.ignore=c.ignore;c.enabled||this.enabled?this.enable():
this.check()}},defineDepById:function(a,d){var b;o(this.depMaps,function(d,c){if(d.id===a)return b=c,!0});return this.defineDep(b,d)},defineDep:function(a,d){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=d)},fetch:function(){if(!this.fetched){this.fetched=!0;g.startTime=(new Date).getTime();var a=this.map;if(this.shim)u(this,!0)(this.shim.deps||[],t(this,function(){return a.prefix?this.callPlugin():this.load()}));else return a.prefix?this.callPlugin():this.load()}},
load:function(){var a=this.map.url;R[a]||(R[a]=!0,g.load(this.map.id,a))},check:function(a){if(this.enabled&&!this.enabling){var d,b,c=this.map.id;b=this.depExports;var e=this.exports,i=this.factory;if(this.inited)if(this.error)this.emit("error",this.error);else{if(!this.defining){this.defining=!0;if(this.depCount<1&&!this.defined){if(x(i)){if(this.events.error)try{e=g.execCb(c,i,b,e)}catch(f){d=f}else e=g.execCb(c,i,b,e);if(this.map.isDefine)if((b=this.module)&&b.exports!==void 0&&b.exports!==this.exports)e=
b.exports;else if(e===void 0&&this.usingExports)e=this.exports;if(d)return d.requireMap=this.map,d.requireModules=[this.map.id],d.requireType="define",A(this.error=d)}else e=i;this.exports=e;if(this.map.isDefine&&!this.ignore&&(q[c]=e,j.onResourceLoad))j.onResourceLoad(g,this.map,this.depMaps);delete n[c];this.defined=!0;g.waitCount-=1;g.waitCount===0&&(L=[])}this.defining=!1;if(!a&&this.defined&&!this.defineEmitted)this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0}}else this.fetch()}},
callPlugin:function(){var a=this.map,d=a.id,b=c(a.prefix,null,!1,!0);r(b,"defined",t(this,function(b){var k;k=this.map.name;var i=this.map.parentMap?this.map.parentMap.name:null;if(this.map.unnormalized){if(b.normalize&&(k=b.normalize(k,function(a){return e(a,i,!0)})||""),b=c(a.prefix+"!"+k,this.map.parentMap,!1,!0),r(b,"defined",t(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),b=n[b.id]){if(this.events.error)b.on("error",t(this,function(a){this.emit("error",a)}));
b.enable()}}else k=t(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),k.error=t(this,function(a){this.inited=!0;this.error=a;a.requireModules=[d];y(n,function(a){a.map.id.indexOf(d+"_unnormalized")===0&&z(a.map.id)});A(a)}),k.fromText=function(a,b){var d=K;d&&(K=!1);p(c(a));j.exec(b);d&&(K=!0);g.completeLoad(a)},b.load(a.name,u(a.parentMap,!0,function(a,b,d){a.rjsSkipMap=!0;return g.require(a,b,d)}),k,m)}));g.enable(b,this);this.pluginMaps[b.id]=b},enable:function(){this.enabled=
!0;if(!this.waitPushed)L.push(this),g.waitCount+=1,this.waitPushed=!0;this.enabling=!0;o(this.depMaps,t(this,function(a,b){var k,e;if(typeof a==="string"){a=c(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.depMaps.rjsSkipMap);this.depMaps[b]=a;if(k=Q[a.id]){this.depExports[b]=k(this);return}this.depCount+=1;r(a,"defined",t(this,function(a){this.defineDep(b,a);this.check()}));this.errback&&r(a,"error",this.errback)}k=a.id;e=n[k];!Q[k]&&e&&!e.enabled&&g.enable(a,this)}));y(this.pluginMaps,
t(this,function(a){var b=n[a.id];b&&!b.enabled&&g.enable(a,this)}));this.enabling=!1;this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]);c.push(b)},emit:function(a,b){o(this.events[a],function(a){a(b)});a==="error"&&delete this.events[a]}};return g={config:m,contextName:b,registry:n,defined:q,urlFetched:R,waitCount:0,defQueue:D,Module:X,makeModuleMap:c,configure:function(a){a.baseUrl&&a.baseUrl.charAt(a.baseUrl.length-1)!=="/"&&(a.baseUrl+="/");var b=m.pkgs,e=m.shim,f=m.paths,
j=m.map;N(m,a,!0);m.paths=N(f,a.paths,!0);if(a.map)m.map=N(j||{},a.map,!0,!0);if(a.shim)y(a.shim,function(a,b){E(a)&&(a={deps:a});if(a.exports&&!a.exports.__buildReady)a.exports=g.makeShimExports(a.exports);e[b]=a}),m.shim=e;if(a.packages)o(a.packages,function(a){a=typeof a==="string"?{name:a}:a;b[a.name]={name:a.name,location:a.location||a.name,main:(a.main||"main").replace(ka,"").replace(ea,"")}}),m.pkgs=b;y(n,function(a,b){if(!a.inited&&!a.map.unnormalized)a.map=c(b)});if(a.deps||a.callback)g.require(a.deps||
[],a.callback)},makeShimExports:function(a){var b;return typeof a==="string"?(b=function(){return $(a)},b.exports=a,b):function(){return a.apply(Z,arguments)}},requireDefined:function(a,b){var e=c(a,b,!1,!0).id;return F.call(q,e)},requireSpecified:function(a,b){a=c(a,b,!1,!0).id;return F.call(q,a)||F.call(n,a)},require:function(a,d,e,f){var h;if(typeof a==="string"){if(x(d))return A(G("requireargs","Invalid require call"),e);if(j.get)return j.get(g,a,d);a=c(a,d,!1,!0);a=a.id;return!F.call(q,a)?A(G("notloaded",
'Module name "'+a+'" has not been loaded yet for context: '+b)):q[a]}e&&!x(e)&&(f=e,e=void 0);d&&!x(d)&&(f=d,d=void 0);for(s();D.length;)if(h=D.shift(),h[0]===null)return A(G("mismatch","Mismatched anonymous define() module: "+h[h.length-1]));else W(h);p(c(null,f)).init(a,d,e,{enabled:!0});T();return g.require},undef:function(a){s();var b=c(a,null,!0),e=n[a];delete q[a];delete R[b.url];delete Y[a];if(e){if(e.events.defined)Y[a]=e.events;z(a)}},enable:function(a){n[a.id]&&p(a).enable()},completeLoad:function(a){var b,
c,e=m.shim[a]||{},f=e.exports&&e.exports.exports;for(s();D.length;){c=D.shift();if(c[0]===null){c[0]=a;if(b)break;b=!0}else c[0]===a&&(b=!0);W(c)}c=n[a];if(!b&&!q[a]&&c&&!c.inited)if(m.enforceDefine&&(!f||!$(f)))if(h(a))return;else return A(G("nodefine","No define call for "+a,null,[a]));else W([a,e.deps||[],e.exports]);T()},toUrl:function(a,b){var c=a.lastIndexOf("."),f=null;c!==-1&&(f=a.substring(c,a.length),a=a.substring(0,c));return g.nameToUrl(e(a,b&&b.id,!0),f)},nameToUrl:function(a,b){var c,
e,f,i,h,g;if(j.jsExtRegExp.test(a))i=a+(b||"");else{c=m.paths;e=m.pkgs;i=a.split("/");for(h=i.length;h>0;h-=1)if(g=i.slice(0,h).join("/"),f=e[g],g=c[g]){E(g)&&(g=g[0]);i.splice(0,h,g);break}else if(f){c=a===f.name?f.location+"/"+f.main:f.location;i.splice(0,h,c);break}i=i.join("/");i+=b||(/\?/.test(i)?"":".js");i=(i.charAt(0)==="/"||i.match(/^[\w\+\.\-]+:/)?"":m.baseUrl)+i}return m.urlArgs?i+((i.indexOf("?")===-1?"?":"&")+m.urlArgs):i},load:function(a,b){j.load(g,a,b)},execCb:function(a,b,c,e){return b.apply(e,
c)},onScriptLoad:function(a){if(a.type==="load"||ma.test((a.currentTarget||a.srcElement).readyState))H=null,a=J(a),g.completeLoad(a.id)},onScriptError:function(a){var b=J(a);if(!h(b.id))return A(G("scripterror","Script error",a,[b.id]))}}}};j({});ba(j);if(w&&(u=p.head=document.getElementsByTagName("head")[0],B=document.getElementsByTagName("base")[0]))u=p.head=B.parentNode;j.onError=function(b){throw b;};j.load=function(b,e,f){var h=b&&b.config||{},c;if(w)return c=h.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml",
"html:script"):document.createElement("script"),c.type=h.scriptType||"text/javascript",c.charset="utf-8",c.async=!0,c.setAttribute("data-requirecontext",b.contextName),c.setAttribute("data-requiremodule",e),c.attachEvent&&!(c.attachEvent.toString&&c.attachEvent.toString().indexOf("[native code")<0)&&!S?(K=!0,c.attachEvent("onreadystatechange",b.onScriptLoad)):(c.addEventListener("load",b.onScriptLoad,!1),c.addEventListener("error",b.onScriptError,!1)),c.src=f,I=c,B?u.insertBefore(c,B):u.appendChild(c),
I=null,c;else fa&&(importScripts(f),b.completeLoad(e))};w&&M(document.getElementsByTagName("script"),function(b){if(!u)u=b.parentNode;if(s=b.getAttribute("data-main")){if(!r.baseUrl)C=s.split("/"),ca=C.pop(),da=C.length?C.join("/")+"/":"./",r.baseUrl=da,s=ca;s=s.replace(ea,"");r.deps=r.deps?r.deps.concat(s):[s];return!0}});define=function(b,e,f){var h,c;typeof b!=="string"&&(f=e,e=b,b=null);E(e)||(f=e,e=[]);!e.length&&x(f)&&f.length&&(f.toString().replace(ia,"").replace(ja,function(b,c){e.push(c)}),
e=(f.length===1?["require"]:["require","exports","module"]).concat(e));if(K&&(h=I||ha()))b||(b=h.getAttribute("data-requiremodule")),c=z[h.getAttribute("data-requirecontext")];(c?c.defQueue:P).push([b,e,f])};define.amd={jQuery:!0};j.exec=function(b){return eval(b)};j(r)}})(this);
/**
* PreloadJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011 gskinner.com, inc.
* 
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
**/

/*
* TweenJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011 gskinner.com, inc.
* 
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/

/*!
 * Cookies.js - 0.2.0
 * Friday, June 15 2012 @ 7:38 PM EST
 *
 * Copyright (c) 2012, Scott Hamper
 * Licensed under the MIT license,
 * http://www.opensource.org/licenses/MIT
 */

this.createjs=this.createjs||{},function(){var e=function(){throw"UID cannot be instantiated"};e._nextID=0,e.get=function(){return e._nextID++},createjs.UID=e}(),this.createjs=this.createjs||{},function(){var e=function(){throw"Ticker cannot be instantiated."};e.useRAF=null,e._listeners=null,e._pauseable=null,e._paused=!1,e._inited=!1,e._startTime=0,e._pausedTime=0,e._ticks=0,e._pausedTicks=0,e._interval=50,e._lastTime=0,e._times=null,e._tickTimes=null,e._rafActive=!1,e._timeoutID=null,e.addListener=function(t,n){t!=null&&(e._inited||e.init(),e.removeListener(t),e._pauseable[e._listeners.length]=n==null?!0:n,e._listeners.push(t))},e.init=function(){e._inited=!0,e._times=[],e._tickTimes=[],e._pauseable=[],e._listeners=[],e._times.push(e._lastTime=e._startTime=e._getTime()),e.setInterval(e._interval)},e.removeListener=function(t){var n=e._listeners;n&&(t=n.indexOf(t),t!=-1&&(n.splice(t,1),e._pauseable.splice(t,1)))},e.removeAllListeners=function(){e._listeners=[],e._pauseable=[]},e.setInterval=function(t){e._interval=t,e._inited&&e._setupTick()},e.getInterval=function(){return e._interval},e.setFPS=function(t){e.setInterval(1e3/t)},e.getFPS=function(){return 1e3/e._interval},e.getMeasuredFPS=function(t){return e._times.length<2?-1:(t==null&&(t=e.getFPS()|0),t=Math.min(e._times.length-1,t),1e3/((e._times[0]-e._times[t])/t))},e.setPaused=function(t){e._paused=t},e.getPaused=function(){return e._paused},e.getTime=function(t){return e._getTime()-e._startTime-(t?e._pausedTime:0)},e.getTicks=function(t){return e._ticks-(t?e._pausedTicks:0)},e._handleAF=function(){e._rafActive=!1,e._setupTick(),e._getTime()-e._lastTime>=(e._interval-1)*.97&&e._tick()},e._handleTimeout=function(){e.timeoutID=null,e._setupTick(),e._tick()},e._setupTick=function(){if(!e._rafActive&&e.timeoutID==null){if(e.useRAF){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(t){t(e._handleAF),e._rafActive=!0;return}}e.timeoutID=setTimeout(e._handleTimeout,e._interval)}},e._tick=function(){var t=e._getTime();e._ticks++;var n=t-e._lastTime,r=e._paused;r&&(e._pausedTicks++,e._pausedTime+=n),e._lastTime=t;for(var i=e._pauseable,s=e._listeners.slice(),o=s?s.length:0,u=0;u<o;u++){var a=s[u];a==null||r&&i[u]||(a.tick?a.tick(n,r):a instanceof Function&&a(n,r))}for(e._tickTimes.unshift(e._getTime()-t);e._tickTimes.length>100;)e._tickTimes.pop();for(e._times.unshift(t);e._times.length>100;)e._times.pop()};var t=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);e._getTime=function(){return t&&t.call(performance)||(new Date).getTime()},createjs.Ticker=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,r,i,s,o,u,a){this.initialize(e,t,n,r,i,s,o,u,a)},t=e.prototype;t.stageX=0,t.stageY=0,t.rawX=0,t.rawY=0,t.type=null,t.nativeEvent=null,t.onMouseMove=null,t.onMouseUp=null,t.target=null,t.pointerID=0,t.primary=!1,t.initialize=function(e,t,n,r,i,s,o,u,a){this.type=e,this.stageX=t,this.stageY=n,this.target=r,this.nativeEvent=i,this.pointerID=s,this.primary=o,this.rawX=u==null?t:u,this.rawY=a==null?n:a},t.clone=function(){return new e(this.type,this.stageX,this.stageY,this.target,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},t.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},createjs.MouseEvent=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,r,i,s){this.initialize(e,t,n,r,i,s)},t=e.prototype;e.identity=null,e.DEG_TO_RAD=Math.PI/180,t.a=1,t.b=0,t.c=0,t.d=1,t.tx=0,t.ty=0,t.alpha=1,t.shadow=null,t.compositeOperation=null,t.initialize=function(e,t,n,r,i,s){return e!=null&&(this.a=e),this.b=t||0,this.c=n||0,r!=null&&(this.d=r),this.tx=i||0,this.ty=s||0,this},t.prepend=function(e,t,n,r,i,s){var o=this.tx;if(e!=1||t!=0||n!=0||r!=1){var u=this.a,a=this.c;this.a=u*e+this.b*n,this.b=u*t+this.b*r,this.c=a*e+this.d*n,this.d=a*t+this.d*r}return this.tx=o*e+this.ty*n+i,this.ty=o*t+this.ty*r+s,this},t.append=function(e,t,n,r,i,s){var o=this.a,u=this.b,a=this.c,f=this.d;return this.a=e*o+t*a,this.b=e*u+t*f,this.c=n*o+r*a,this.d=n*u+r*f,this.tx=i*o+s*a+this.tx,this.ty=i*u+s*f+this.ty,this},t.prependMatrix=function(e){return this.prepend(e.a,e.b,e.c,e.d,e.tx,e.ty),this.prependProperties(e.alpha,e.shadow,e.compositeOperation),this},t.appendMatrix=function(e){return this.append(e.a,e.b,e.c,e.d,e.tx,e.ty),this.appendProperties(e.alpha,e.shadow,e.compositeOperation),this},t.prependTransform=function(t,n,r,i,s,o,u,a,f){if(s%360)var l=s*e.DEG_TO_RAD,s=Math.cos(l),l=Math.sin(l);else s=1,l=0;if(a||f)this.tx-=a,this.ty-=f;return o||u?(o*=e.DEG_TO_RAD,u*=e.DEG_TO_RAD,this.prepend(s*r,l*r,-l*i,s*i,0,0),this.prepend(Math.cos(u),Math.sin(u),-Math.sin(o),Math.cos(o),t,n)):this.prepend(s*r,l*r,-l*i,s*i,t,n),this},t.appendTransform=function(t,n,r,i,s,o,u,a,f){if(s%360)var l=s*e.DEG_TO_RAD,s=Math.cos(l),l=Math.sin(l);else s=1,l=0;o||u?(o*=e.DEG_TO_RAD,u*=e.DEG_TO_RAD,this.append(Math.cos(u),Math.sin(u),-Math.sin(o),Math.cos(o),t,n),this.append(s*r,l*r,-l*i,s*i,0,0)):this.append(s*r,l*r,-l*i,s*i,t,n);if(a||f)this.tx-=a*this.a+f*this.c,this.ty-=a*this.b+f*this.d;return this},t.rotate=function(e){var t=Math.cos(e),e=Math.sin(e),n=this.a,r=this.c,i=this.tx;return this.a=n*t-this.b*e,this.b=n*e+this.b*t,this.c=r*t-this.d*e,this.d=r*e+this.d*t,this.tx=i*t-this.ty*e,this.ty=i*e+this.ty*t,this},t.skew=function(t,n){return t*=e.DEG_TO_RAD,n*=e.DEG_TO_RAD,this.append(Math.cos(n),Math.sin(n),-Math.sin(t),Math.cos(t),0,0),this},t.scale=function(e,t){return this.a*=e,this.d*=t,this.tx*=e,this.ty*=t,this},t.translate=function(e,t){return this.tx+=e,this.ty+=t,this},t.identity=function(){return this.alpha=this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.shadow=this.compositeOperation=null,this},t.invert=function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.tx,s=e*r-t*n;return this.a=r/s,this.b=-t/s,this.c=-n/s,this.d=e/s,this.tx=(n*this.ty-r*i)/s,this.ty=-(e*this.ty-t*i)/s,this},t.isIdentity=function(){return this.tx==0&&this.ty==0&&this.a==1&&this.b==0&&this.c==0&&this.d==1},t.decompose=function(t){t==null&&(t={}),t.x=this.tx,t.y=this.ty,t.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),t.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var n=Math.atan2(-this.c,this.d),r=Math.atan2(this.b,this.a);return n==r?(t.rotation=r/e.DEG_TO_RAD,this.a<0&&this.d>=0&&(t.rotation+=t.rotation<=0?180:-180),t.skewX=t.skewY=0):(t.skewX=n/e.DEG_TO_RAD,t.skewY=r/e.DEG_TO_RAD),t},t.reinitialize=function(e,t,n,r,i,s,o,u,a){return this.initialize(e,t,n,r,i,s),this.alpha=o||1,this.shadow=u,this.compositeOperation=a,this},t.appendProperties=function(e,t,n){return this.alpha*=e,this.shadow=t||this.shadow,this.compositeOperation=n||this.compositeOperation,this},t.prependProperties=function(e,t,n){return this.alpha*=e,this.shadow=this.shadow||t,this.compositeOperation=this.compositeOperation||n,this},t.clone=function(){var t=new e(this.a,this.b,this.c,this.d,this.tx,this.ty);return t.shadow=this.shadow,t.alpha=this.alpha,t.compositeOperation=this.compositeOperation,t},t.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},e.identity=new e(1,0,0,1,0,0),createjs.Matrix2D=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t){this.initialize(e,t)},t=e.prototype;t.x=0,t.y=0,t.initialize=function(e,t){this.x=e==null?0:e,this.y=t==null?0:t},t.clone=function(){return new e(this.x,this.y)},t.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},createjs.Point=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,r){this.initialize(e,t,n,r)},t=e.prototype;t.x=0,t.y=0,t.width=0,t.height=0,t.initialize=function(e,t,n,r){this.x=e==null?0:e,this.y=t==null?0:t,this.width=n==null?0:n,this.height=r==null?0:r},t.clone=function(){return new e(this.x,this.y,this.width,this.height)},t.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},createjs.Rectangle=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,r){this.initialize(e,t,n,r)},t=e.prototype;e.identity=null,t.color=null,t.offsetX=0,t.offsetY=0,t.blur=0,t.initialize=function(e,t,n,r){this.color=e,this.offsetX=t,this.offsetY=n,this.blur=r},t.toString=function(){return"[Shadow]"},t.clone=function(){return new e(this.color,this.offsetX,this.offsetY,this.blur)},e.identity=new e("transparent",0,0,0),createjs.Shadow=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype;t.complete=!0,t.onComplete=null,t._animations=null,t._frames=null,t._images=null,t._data=null,t._loadCount=0,t._frameHeight=0,t._frameWidth=0,t._numFrames=0,t._regX=0,t._regY=0,t.initialize=function(e){var t,n,r;if(e!=null){if(e.images&&(n=e.images.length)>0){r=this._images=[];for(t=0;t<n;t++){var i=e.images[t];if(typeof i=="string"){var s=i,i=new Image;i.src=s}r.push(i),!i.getContext&&!i.complete&&(this._loadCount++,this.complete=!1,function(e){i.onload=function(){e._handleImageLoad()}}(this))}}if(e.frames!=null)if(e.frames instanceof Array){this._frames=[],r=e.frames;for(t=0,n=r.length;t<n;t++)s=r[t],this._frames.push({image:this._images[s[4]?s[4]:0],rect:new createjs.Rectangle(s[0],s[1],s[2],s[3]),regX:s[5]||0,regY:s[6]||0})}else n=e.frames,this._frameWidth=n.width,this._frameHeight=n.height,this._regX=n.regX||0,this._regY=n.regY||0,this._numFrames=n.count,this._loadCount==0&&this._calculateFrames();if((n=e.animations)!=null){this._animations=[],this._data={};for(var o in n){e={name:o},s=n[o];if(isNaN(s))if(s instanceof Array){e.frequency=s[3],e.next=s[2],r=e.frames=[];for(t=s[0];t<=s[1];t++)r.push(t)}else e.frequency=s.frequency,e.next=s.next,t=s.frames,r=e.frames=isNaN(t)?t.slice(0):[t];else r=e.frames=[s];e.next=r.length<2||e.next==0?null:e.next==null||e.next==1?o:e.next,e.frequency||(e.frequency=1),this._animations.push(o),this._data[o]=e}}}},t.getNumFrames=function(e){return e==null?this._frames?this._frames.length:this._numFrames:(e=this._data[e],e==null?0:e.frames.length)},t.getAnimations=function(){return this._animations.slice(0)},t.getAnimation=function(e){return this._data[e]},t.getFrame=function(e){return this.complete&&this._frames&&(frame=this._frames[e])?frame:null},t.toString=function(){return"[SpriteSheet]"},t.clone=function(){var t=new e;return t.complete=this.complete,t._animations=this._animations,t._frames=this._frames,t._images=this._images,t._data=this._data,t._frameHeight=this._frameHeight,t._frameWidth=this._frameWidth,t._numFrames=this._numFrames,t._loadCount=this._loadCount,t},t._handleImageLoad=function(){--this._loadCount==0&&(this._calculateFrames(),this.complete=!0,this.onComplete&&this.onComplete())},t._calculateFrames=function(){if(!this._frames&&this._frameWidth!=0){this._frames=[];for(var e=0,t=this._frameWidth,n=this._frameHeight,r=0,i=this._images;r<i.length;r++){for(var s=i[r],o=(s.width+1)/t|0,u=(s.height+1)/n|0,u=this._numFrames>0?Math.min(this._numFrames-e,o*u):o*u,a=0;a<u;a++)this._frames.push({image:s,rect:new createjs.Rectangle(a%o*t,(a/o|0)*n,t,n),regX:this._regX,regY:this._regY});e+=u}this._numFrames=e}},createjs.SpriteSheet=e}(),this.createjs=this.createjs||{},function(){function e(e,t,n){this.f=e,this.params=t,this.path=n==null?!0:n}e.prototype.exec=function(e){this.f.apply(e,this.params)};var t=function(){this.initialize()},n=t.prototype;t.getRGB=function(e,t,n,r){return e!=null&&n==null&&(r=t,n=e&255,t=e>>8&255,e=e>>16&255),r==null?"rgb("+e+","+t+","+n+")":"rgba("+e+","+t+","+n+","+r+")"},t.getHSL=function(e,t,n,r){return r==null?"hsl("+e%360+","+t+"%,"+n+"%)":"hsla("+e%360+","+t+"%,"+n+"%,"+r+")"},t.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},t.STROKE_CAPS_MAP=["butt","round","square"],t.STROKE_JOINTS_MAP=["miter","round","bevel"],t._ctx=(createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")).getContext("2d"),t.beginCmd=new e(t._ctx.beginPath,[],!1),t.fillCmd=new e(t._ctx.fill,[],!1),t.strokeCmd=new e(t._ctx.stroke,[],!1),n._strokeInstructions=null,n._strokeStyleInstructions=null,n._fillInstructions=null,n._instructions=null,n._oldInstructions=null,n._activeInstructions=null,n._active=!1,n._dirty=!1,n.initialize=function(){this.clear(),this._ctx=t._ctx},n.draw=function(e){this._dirty&&this._updateInstructions();for(var t=this._instructions,n=0,r=t.length;n<r;n++)t[n].exec(e)},n.drawAsPath=function(e){this._dirty&&this._updateInstructions();for(var t,n=this._instructions,r=0,i=n.length;r<i;r++)((t=n[r]).path||r==0)&&t.exec(e)},n.moveTo=function(t,n){return this._activeInstructions.push(new e(this._ctx.moveTo,[t,n])),this},n.lineTo=function(t,n){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.lineTo,[t,n])),this},n.arcTo=function(t,n,r,i,s){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.arcTo,[t,n,r,i,s])),this},n.arc=function(t,n,r,i,s,o){return this._dirty=this._active=!0,o==null&&(o=!1),this._activeInstructions.push(new e(this._ctx.arc,[t,n,r,i,s,o])),this},n.quadraticCurveTo=function(t,n,r,i){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.quadraticCurveTo,[t,n,r,i])),this},n.bezierCurveTo=function(t,n,r,i,s,o){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.bezierCurveTo,[t,n,r,i,s,o])),this},n.rect=function(t,n,r,i){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.rect,[t,n,r,i])),this},n.closePath=function(){return this._active&&(this._dirty=!0,this._activeInstructions.push(new e(this._ctx.closePath,[]))),this},n.clear=function(){return this._instructions=[],this._oldInstructions=[],this._activeInstructions=[],this._strokeStyleInstructions=this._strokeInstructions=this._fillInstructions=null,this._active=this._dirty=!1,this},n.beginFill=function(t){return this._active&&this._newPath(),this._fillInstructions=t?[new e(this._setProp,["fillStyle",t],!1)]:null,this},n.beginLinearGradientFill=function(t,n,r,i,s,o){this._active&&this._newPath(),r=this._ctx.createLinearGradient(r,i,s,o),i=0;for(s=t.length;i<s;i++)r.addColorStop(n[i],t[i]);return this._fillInstructions=[new e(this._setProp,["fillStyle",r],!1)],this},n.beginRadialGradientFill=function(t,n,r,i,s,o,u,a){this._active&&this._newPath(),r=this._ctx.createRadialGradient(r,i,s,o,u,a),i=0;for(s=t.length;i<s;i++)r.addColorStop(n[i],t[i]);return this._fillInstructions=[new e(this._setProp,["fillStyle",r],!1)],this},n.beginBitmapFill=function(t,n){this._active&&this._newPath();var r=this._ctx.createPattern(t,n||"");return this._fillInstructions=[new e(this._setProp,["fillStyle",r],!1)],this},n.endFill=function(){return this.beginFill()},n.setStrokeStyle=function(n,r,i,s){return this._active&&this._newPath(),this._strokeStyleInstructions=[new e(this._setProp,["lineWidth",n==null?"1":n],!1),new e(this._setProp,["lineCap",r==null?"butt":isNaN(r)?r:t.STROKE_CAPS_MAP[r]],!1),new e(this._setProp,["lineJoin",i==null?"miter":isNaN(i)?i:t.STROKE_JOINTS_MAP[i]],!1),new e(this._setProp,["miterLimit",s==null?"10":s],!1)],this},n.beginStroke=function(t){return this._active&&this._newPath(),this._strokeInstructions=t?[new e(this._setProp,["strokeStyle",t],!1)]:null,this},n.beginLinearGradientStroke=function(t,n,r,i,s,o){this._active&&this._newPath(),r=this._ctx.createLinearGradient(r,i,s,o),i=0;for(s=t.length;i<s;i++)r.addColorStop(n[i],t[i]);return this._strokeInstructions=[new e(this._setProp,["strokeStyle",r],!1)],this},n.beginRadialGradientStroke=function(t,n,r,i,s,o,u,a){this._active&&this._newPath(),r=this._ctx.createRadialGradient(r,i,s,o,u,a),i=0;for(s=t.length;i<s;i++)r.addColorStop(n[i],t[i]);return this._strokeInstructions=[new e(this._setProp,["strokeStyle",r],!1)],this},n.beginBitmapStroke=function(t,n){this._active&&this._newPath();var r=this._ctx.createPattern(t,n||"");return this._strokeInstructions=[new e(this._setProp,["strokeStyle",r],!1)],this},n.endStroke=function(){return this.beginStroke(),this},n.curveTo=n.quadraticCurveTo,n.drawRect=n.rect,n.drawRoundRect=function(e,t,n,r,i){return this.drawRoundRectComplex(e,t,n,r,i,i,i,i),this},n.drawRoundRectComplex=function(t,n,r,i,s,o,u,a){var f=(r<i?r:i)/2,l=0,h=0,p=0,d=0;s<0&&(s*=l=-1),s>f&&(s=f),o<0&&(o*=h=-1),o>f&&(o=f),u<0&&(u*=p=-1),u>f&&(u=f),a<0&&(a*=d=-1),a>f&&(a=f),this._dirty=this._active=!0;var f=this._ctx.arcTo,v=this._ctx.lineTo;return this._activeInstructions.push(new e(this._ctx.moveTo,[t+r-o,n]),new e(f,[t+r+o*h,n-o*h,t+r,n+o,o]),new e(v,[t+r,n+i-u]),new e(f,[t+r+u*p,n+i+u*p,t+r-u,n+i,u]),new e(v,[t+a,n+i]),new e(f,[t-a*d,n+i+a*d,t,n+i-a,a]),new e(v,[t,n+s]),new e(f,[t-s*l,n-s*l,t+s,n,s]),new e(this._ctx.closePath)),this},n.drawCircle=function(e,t,n){return this.arc(e,t,n,0,Math.PI*2),this},n.drawEllipse=function(t,n,r,i){this._dirty=this._active=!0;var s=r/2*.5522848,o=i/2*.5522848,u=t+r,a=n+i,r=t+r/2,i=n+i/2;return this._activeInstructions.push(new e(this._ctx.moveTo,[t,i]),new e(this._ctx.bezierCurveTo,[t,i-o,r-s,n,r,n]),new e(this._ctx.bezierCurveTo,[r+s,n,u,i-o,u,i]),new e(this._ctx.bezierCurveTo,[u,i+o,r+s,a,r,a]),new e(this._ctx.bezierCurveTo,[r-s,a,t,i+o,t,i])),this},n.drawPolyStar=function(t,n,r,i,s,o){this._dirty=this._active=!0,s==null&&(s=0),s=1-s,o==null?o=0:o/=180/Math.PI;var u=Math.PI/i;this._activeInstructions.push(new e(this._ctx.moveTo,[t+Math.cos(o)*r,n+Math.sin(o)*r]));for(var a=0;a<i;a++)o+=u,s!=1&&this._activeInstructions.push(new e(this._ctx.lineTo,[t+Math.cos(o)*r*s,n+Math.sin(o)*r*s])),o+=u,this._activeInstructions.push(new e(this._ctx.lineTo,[t+Math.cos(o)*r,n+Math.sin(o)*r]));return this},n.decodePath=function(e){for(var n=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo],r=[2,2,4,6],i=0,s=e.length,o=[],u=0,a=0,f=t.BASE_64;i<s;){var l=e.charAt(i),c=f[l],h=c>>3,p=n[h];if(!p||c&3)throw"bad path data (@"+i+"): "+l;l=r[h],h||(u=a=0),o.length=0,i++,c=(c>>2&1)+2;for(h=0;h<l;h++){var d=f[e.charAt(i)],v=d>>5?-1:1,d=(d&31)<<6|f[e.charAt(i+1)];c==3&&(d=d<<6|f[e.charAt(i+2)]),d=v*d/10,h%2?u=d+=u:a=d+=a,o[h]=d,i+=c}p.apply(this,o)}return this},n.clone=function(){var e=new t;return e._instructions=this._instructions.slice(),e._activeInstructions=this._activeInstructions.slice(),e._oldInstructions=this._oldInstructions.slice(),this._fillInstructions&&(e._fillInstructions=this._fillInstructions.slice()),this._strokeInstructions&&(e._strokeInstructions=this._strokeInstructions.slice()),this._strokeStyleInstructions&&(e._strokeStyleInstructions=this._strokeStyleInstructions.slice()),e._active=this._active,e._dirty=this._dirty,e.drawAsPath=this.drawAsPath,e},n.toString=function(){return"[Graphics]"},n.mt=n.moveTo,n.lt=n.lineTo,n.at=n.arcTo,n.bt=n.bezierCurveTo,n.qt=n.quadraticCurveTo,n.a=n.arc,n.r=n.rect,n.cp=n.closePath,n.c=n.clear,n.f=n.beginFill,n.lf=n.beginLinearGradientFill,n.rf=n.beginRadialGradientFill,n.bf=n.beginBitmapFill,n.ef=n.endFill,n.ss=n.setStrokeStyle,n.s=n.beginStroke,n.ls=n.beginLinearGradientStroke,n.rs=n.beginRadialGradientStroke,n.bs=n.beginBitmapStroke,n.es=n.endStroke,n.dr=n.drawRect,n.rr=n.drawRoundRect,n.rc=n.drawRoundRectComplex,n.dc=n.drawCircle,n.de=n.drawEllipse,n.dp=n.drawPolyStar,n.p=n.decodePath,n._updateInstructions=function(){this._instructions=this._oldInstructions.slice(),this._instructions.push(t.beginCmd),this._fillInstructions&&this._instructions.push.apply(this._instructions,this._fillInstructions),this._strokeInstructions&&(this._instructions.push.apply(this._instructions,this._strokeInstructions),this._strokeStyleInstructions&&this._instructions.push.apply(this._instructions,this._strokeStyleInstructions)),this._instructions.push.apply(this._instructions,this._activeInstructions),this._fillInstructions&&this._instructions.push(t.fillCmd),this._strokeInstructions&&this._instructions.push(t.strokeCmd)},n._getEllipseArc=function(t,n,r,i){var s=r/2*.5522848,o=i/2*.5522848,u=t+r,a=n+i,r=t+r/2,i=n+i/2;return this._activeInstructions.push(new e(this._ctx.moveTo,[t,i]),new e(this._ctx.bezierCurveTo,[t,i-o,r-s,n,r,n]),new e(this._ctx.bezierCurveTo,[r+s,n,u,i-o,u,i]),new e(this._ctx.bezierCurveTo,[u,i+o,r+s,a,r,a]),new e(this._ctx.bezierCurveTo,[r-s,a,t,i+o,t,i])),this},n._newPath=function(){this._dirty&&this._updateInstructions(),this._oldInstructions=this._instructions,this._activeInstructions=[],this._active=this._dirty=!1},n._setProp=function(e,t){this[e]=t},createjs.Graphics=t}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype;e.suppressCrossDomainErrors=!1,e._hitTestCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),e._hitTestCanvas.width=e._hitTestCanvas.height=1,e._hitTestContext=e._hitTestCanvas.getContext("2d"),e._nextCacheID=1,t.alpha=1,t.cacheCanvas=null,t.id=-1,t.mouseEnabled=!0,t.name=null,t.parent=null,t.regX=0,t.regY=0,t.rotation=0,t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.shadow=null,t.visible=!0,t.x=0,t.y=0,t.compositeOperation=null,t.snapToPixel=!1,t.onPress=null,t.onClick=null,t.onDoubleClick=null,t.onMouseOver=null,t.onMouseOut=null,t.onTick=null,t.filters=null,t.cacheID=0,t.mask=null,t.hitArea=null,t._cacheOffsetX=0,t._cacheOffsetY=0,t._cacheScale=1,t._cacheDataURLID=0,t._cacheDataURL=null,t._matrix=null,t.initialize=function(){this.id=createjs.UID.get(),this._matrix=new createjs.Matrix2D},t.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0},t.draw=function(e,t){var n=this.cacheCanvas;if(t||!n)return!1;var r=this._cacheScale;return e.drawImage(n,this._cacheOffsetX,this._cacheOffsetY,n.width/r,n.height/r),!0},t.updateContext=function(e){var t,n=this.mask;n&&n.graphics&&(t=n.getMatrix(n._matrix),e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty),n.graphics.drawAsPath(e),e.clip(),t.invert(),e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty)),t=this._matrix.identity().appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.regX,this.regY),createjs.Stage._snapToPixelEnabled&&this.snapToPixel?e.transform(t.a,t.b,t.c,t.d,t.tx+.5|0,t.ty+.5|0):e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty),e.globalAlpha*=this.alpha,this.compositeOperation&&(e.globalCompositeOperation=this.compositeOperation),this.shadow&&this._applyShadow(e,this.shadow)},t.cache=function(e,t,n,r,i){i=i||1,this.cacheCanvas||(this.cacheCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),this.cacheCanvas.width=Math.ceil(n*i),this.cacheCanvas.height=Math.ceil(r*i),this._cacheOffsetX=e,this._cacheOffsetY=t,this._cacheScale=i||1,this.updateCache()},t.updateCache=function(t){var n=this.cacheCanvas,r=this._cacheOffsetX,i=this._cacheOffsetY,s=this._cacheScale;if(!n)throw"cache() must be called before updateCache()";var o=n.getContext("2d");o.save(),t||o.clearRect(0,0,n.width,n.height),o.globalCompositeOperation=t,o.setTransform(s,0,0,s,-r,-i),this.draw(o,!0),this._applyFilters(),o.restore(),this.cacheID=e._nextCacheID++},t.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=0,this._cacheScale=1},t.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},t.getStage=function(){for(var e=this;e.parent;)e=e.parent;return e instanceof createjs.Stage?e:null},t.localToGlobal=function(e,t){var n=this.getConcatenatedMatrix(this._matrix);return n==null?null:(n.append(1,0,0,1,e,t),new createjs.Point(n.tx,n.ty))},t.globalToLocal=function(e,t){var n=this.getConcatenatedMatrix(this._matrix);return n==null?null:(n.invert(),n.append(1,0,0,1,e,t),new createjs.Point(n.tx,n.ty))},t.localToLocal=function(e,t,n){return e=this.localToGlobal(e,t),n.globalToLocal(e.x,e.y)},t.setTransform=function(e,t,n,r,i,s,o,u,a){return this.x=e||0,this.y=t||0,this.scaleX=n==null?1:n,this.scaleY=r==null?1:r,this.rotation=i||0,this.skewX=s||0,this.skewY=o||0,this.regX=u||0,this.regY=a||0,this},t.getMatrix=function(e){return(e?e.identity():new createjs.Matrix2D).appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.regX,this.regY).appendProperties(this.alpha,this.shadow,this.compositeOperation)},t.getConcatenatedMatrix=function(e){e?e.identity():e=new createjs.Matrix2D;for(var t=this;t!=null;)e.prependTransform(t.x,t.y,t.scaleX,t.scaleY,t.rotation,t.skewX,t.skewY,t.regX,t.regY).prependProperties(t.alpha,t.shadow,t.compositeOperation),t=t.parent;return e},t.hitTest=function(t,n){var r=e._hitTestContext,i=e._hitTestCanvas;return r.setTransform(1,0,0,1,-t,-n),this.draw(r),r=this._testHit(r),i.width=0,i.width=1,r},t.clone=function(){var t=new e;return this.cloneProps(t),t},t.toString=function(){return"[DisplayObject (name="+this.name+")]"},t.cloneProps=function(e){e.alpha=this.alpha,e.name=this.name,e.regX=this.regX,e.regY=this.regY,e.rotation=this.rotation,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.shadow=this.shadow,e.skewX=this.skewX,e.skewY=this.skewY,e.visible=this.visible,e.x=this.x,e.y=this.y,e.mouseEnabled=this.mouseEnabled,e.compositeOperation=this.compositeOperation,this.cacheCanvas&&(e.cacheCanvas=this.cacheCanvas.cloneNode(!0),e.cacheCanvas.getContext("2d").putImageData(this.cacheCanvas.getContext("2d").getImageData(0,0,this.cacheCanvas.width,this.cacheCanvas.height),0,0))},t._applyShadow=function(e,t){t=t||Shadow.identity,e.shadowColor=t.color,e.shadowOffsetX=t.offsetX,e.shadowOffsetY=t.offsetY,e.shadowBlur=t.blur},t._tick=function(e){this.onTick&&(e?this.onTick.apply(this,e):this.onTick())},t._testHit=function(t){try{var n=t.getImageData(0,0,1,1).data[3]>1}catch(r){if(!e.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return n},t._applyFilters=function(){if(this.filters&&this.filters.length!=0&&this.cacheCanvas)for(var e=this.filters.length,t=this.cacheCanvas.getContext("2d"),n=this.cacheCanvas.width,r=this.cacheCanvas.height,i=0;i<e;i++)this.filters[i].applyFilter(t,0,0,n,r)},createjs.DisplayObject=e}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype=new createjs.DisplayObject;t.children=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(){this.DisplayObject_initialize(),this.children=[]},t.isVisible=function(){return this.visible&&this.alpha>0&&this.children.length&&this.scaleX!=0&&this.scaleY!=0},t.DisplayObject_draw=t.draw,t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;for(var n=this.children.slice(0),r=0,i=n.length;r<i;r++){var s=n[r];s.isVisible()&&(e.save(),s.updateContext(e),s.draw(e),e.restore())}return!0},t.addChild=function(e){if(e==null)return e;var t=arguments.length;if(t>1){for(var n=0;n<t;n++)this.addChild(arguments[n]);return arguments[t-1]}return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.push(e),e},t.addChildAt=function(e,t){var n=arguments.length,r=arguments[n-1];if(r<0||r>this.children.length)return arguments[n-2];if(n>2){for(var i=0;i<n-1;i++)this.addChildAt(arguments[i],r+i);return arguments[n-2]}return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.splice(t,0,e),e},t.removeChild=function(e){var t=arguments.length;if(t>1){for(var n=!0,r=0;r<t;r++)n=n&&this.removeChild(arguments[r]);return n}return this.removeChildAt(this.children.indexOf(e))},t.removeChildAt=function(e){var t=arguments.length;if(t>1){for(var n=[],r=0;r<t;r++)n[r]=arguments[r];n.sort(function(e,t){return t-e});for(var i=!0,r=0;r<t;r++)i=i&&this.removeChildAt(n[r]);return i}if(e<0||e>this.children.length-1)return!1;if(t=this.children[e])t.parent=null;return this.children.splice(e,1),!0},t.removeAllChildren=function(){for(var e=this.children;e.length;)e.pop().parent=null},t.getChildAt=function(e){return this.children[e]},t.sortChildren=function(e){this.children.sort(e)},t.getChildIndex=function(e){return this.children.indexOf(e)},t.getNumChildren=function(){return this.children.length},t.swapChildrenAt=function(e,t){var n=this.children,r=n[e],i=n[t];r&&i&&(n[e]=i,n[t]=r)},t.swapChildren=function(e,t){for(var n=this.children,r,i,s=0,o=n.length;s<o;s++)if(n[s]==e&&(r=s),n[s]==t&&(i=s),r!=null&&i!=null)break;s!=o&&(n[r]=t,n[i]=e)},t.setChildIndex=function(e,t){var n=this.children,r=n.length;if(!(e.parent!=this||t<0||t>=r)){for(var i=0;i<r;i++)if(n[i]==e)break;i==r||i==t||(n.splice(i,1),t<i&&t--,n.splice(t,0,e))}},t.contains=function(e){for(;e;){if(e==this)return!0;e=e.parent}return!1},t.hitTest=function(e,t){return this.getObjectUnderPoint(e,t)!=null},t.getObjectsUnderPoint=function(e,t){var n=[],r=this.localToGlobal(e,t);return this._getObjectsUnderPoint(r.x,r.y,n),n},t.getObjectUnderPoint=function(e,t){var n=this.localToGlobal(e,t);return this._getObjectsUnderPoint(n.x,n.y)},t.clone=function(t){var n=new e;this.cloneProps(n);if(t)for(var r=n.children=[],i=0,s=this.children.length;i<s;i++){var o=this.children[i].clone(t);o.parent=n,r.push(o)}return n},t.toString=function(){return"[Container (name="+this.name+")]"},t.DisplayObject__tick=t._tick,t._tick=function(e){for(var t=this.children.length-1;t>=0;t--){var n=this.children[t];n._tick&&n._tick(e)}this.DisplayObject__tick(e)},t._getObjectsUnderPoint=function(t,n,r,i){var s=createjs.DisplayObject._hitTestContext,o=createjs.DisplayObject._hitTestCanvas,u=this._matrix,a=i&1&&(this.onPress||this.onClick||this.onDoubleClick)||i&2&&(this.onMouseOver||this.onMouseOut);if(this.cacheCanvas&&a&&(this.getConcatenatedMatrix(u),s.setTransform(u.a,u.b,u.c,u.d,u.tx-t,u.ty-n),s.globalAlpha=u.alpha,this.draw(s),this._testHit(s)))return o.width=0,o.width=1,this;for(var f=this.children.length-1;f>=0;f--){var l=this.children[f];if(l.isVisible()&&l.mouseEnabled)if(l instanceof e){if(a){if(l=l._getObjectsUnderPoint(t,n))return this}else if(l=l._getObjectsUnderPoint(t,n,r,i),!r&&l)return l}else if(!i||a||i&1&&(l.onPress||l.onClick||l.onDoubleClick)||i&2&&(l.onMouseOver||l.onMouseOut)){var h=l.hitArea;l.getConcatenatedMatrix(u),h&&(u.appendTransform(h.x+l.regX,h.y+l.regY,h.scaleX,h.scaleY,h.rotation,h.skewX,h.skewY,h.regX,h.regY),u.alpha*=h.alpha/l.alpha),s.globalAlpha=u.alpha,s.setTransform(u.a,u.b,u.c,u.d,u.tx-t,u.ty-n),(h||l).draw(s);if(this._testHit(s)){if(o.width=0,o.width=1,a)return this;if(!r)return l;r.push(l)}}}return null},createjs.Container=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.Container;e._snapToPixelEnabled=!1,t.autoClear=!0,t.canvas=null,t.mouseX=0,t.mouseY=0,t.onMouseMove=null,t.onMouseUp=null,t.onMouseDown=null,t.snapToPixelEnabled=!1,t.mouseInBounds=!1,t.tickOnUpdate=!0,t.mouseMoveOutside=!1,t._pointerData=null,t._pointerCount=0,t._primaryPointerID=null,t._mouseOverIntervalID=null,t.Container_initialize=t.initialize,t.initialize=function(e){this.Container_initialize(),this.canvas=e instanceof HTMLCanvasElement?e:document.getElementById(e),this._pointerData={},this._enableMouseEvents(!0)},t.update=function(){if(this.canvas){this.autoClear&&this.clear(),e._snapToPixelEnabled=this.snapToPixelEnabled,this.tickOnUpdate&&this._tick(arguments.length?arguments:null);var t=this.canvas.getContext("2d");t.save(),this.updateContext(t),this.draw(t,!1),t.restore()}},t.tick=t.update,t.clear=function(){if(this.canvas){var e=this.canvas.getContext("2d");e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,this.canvas.width,this.canvas.height)}},t.toDataURL=function(e,t){t||(t="image/png");var n=this.canvas.getContext("2d"),r=this.canvas.width,i=this.canvas.height,s;if(e){s=n.getImageData(0,0,r,i);var o=n.globalCompositeOperation;n.globalCompositeOperation="destination-over",n.fillStyle=e,n.fillRect(0,0,r,i)}var u=this.canvas.toDataURL(t);return e&&(n.clearRect(0,0,r,i),n.putImageData(s,0,0),n.globalCompositeOperation=o),u},t.enableMouseOver=function(e){this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null);if(e==null)e=20;else if(e<=0)return;var t=this;this._mouseOverIntervalID=setInterval(function(){t._testMouseOver()},1e3/Math.min(50,e))},t.clone=function(){var t=new e(null);return this.cloneProps(t),t},t.toString=function(){return"[Stage (name="+this.name+")]"},t._enableMouseEvents=function(){var e=this,t=window.addEventListener?window:document;t.addEventListener("mouseup",function(t){e._handleMouseUp(t)},!1),t.addEventListener("mousemove",function(t){e._handleMouseMove(t)},!1),t.addEventListener("dblclick",function(t){e._handleDoubleClick(t)},!1),this.canvas&&this.canvas.addEventListener("mousedown",function(t){e._handleMouseDown(t)},!1)},t._getPointerData=function(e){var t=this._pointerData[e];return!t&&(t=this._pointerData[e]={x:0,y:0},this._primaryPointerID==null)&&(this._primaryPointerID=e),t},t._handleMouseMove=function(e){e||(e=window.event),this._handlePointerMove(-1,e,e.pageX,e.pageY)},t._handlePointerMove=function(e,t,n,r){if(this.canvas){var i=this._getPointerData(e),s=i.inBounds;this._updatePointerPosition(e,n,r);if(s||i.inBounds||this.mouseMoveOutside)e=new createjs.MouseEvent("onMouseMove",i.x,i.y,this,t,e,e==this._primaryPointerID,i.rawX,i.rawY),this.onMouseMove&&this.onMouseMove(e),i.event&&i.event.onMouseMove&&(e=e.clone(),e.target=i.event.target,i.event.onMouseMove(e))}},t._updatePointerPosition=function(e,t,n){var r=this._getElementRect(this.canvas);t-=r.left,n-=r.top;var i=this.canvas.width,s=this.canvas.height;t/=(r.right-r.left)/i,n/=(r.bottom-r.top)/s,r=this._getPointerData(e),(r.inBounds=t>=0&&n>=0&&t<=i-1&&n<=s-1)?(r.x=t,r.y=n):this.mouseMoveOutside&&(r.x=t<0?0:t>i-1?i-1:t,r.y=n<0?0:n>s-1?s-1:n),r.rawX=t,r.rawY=n,e==this._primaryPointerID&&(this.mouseX=r.x,this.mouseY=r.y,this.mouseInBounds=r.inBounds)},t._getElementRect=function(e){var t=e.getBoundingClientRect(),n=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),r=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),i=window.getComputedStyle?getComputedStyle(e):e.currentStyle,e=parseInt(i.paddingLeft)+parseInt(i.borderLeftWidth),s=parseInt(i.paddingTop)+parseInt(i.borderTopWidth),o=parseInt(i.paddingRight)+parseInt(i.borderRightWidth),i=parseInt(i.paddingBottom)+parseInt(i.borderBottomWidth);return{left:t.left+n+e,right:t.right+n-o,top:t.top+r+s,bottom:t.bottom+r-i}},t._handleMouseUp=function(e){this._handlePointerUp(-1,e,!1)},t._handlePointerUp=function(e,t,n){var r=this._getPointerData(e),i=new createjs.MouseEvent("onMouseUp",r.x,r.y,this,t,e,e==this._primaryPointerID,r.rawX,r.rawY);this.onMouseUp&&this.onMouseUp(i),r.event&&r.event.onMouseUp&&(i=i.clone(),i.target=r.event.target,r.event.onMouseUp(i)),r.target&&r.target.onClick&&this._getObjectsUnderPoint(r.x,r.y,null,true,this._mouseOverIntervalID?3:1)==r.target&&r.target.onClick(new createjs.MouseEvent("onClick",r.x,r.y,r.target,t,e,e==this._primaryPointerID,r.rawX,r.rawY)),n?(e==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[e]):r.event=r.target=null},t._handleMouseDown=function(e){this._handlePointerDown(-1,e,!1)},t._handlePointerDown=function(e,t,n,r){var i=this._getPointerData(e);r!=null&&this._updatePointerPosition(e,n,r),this.onMouseDown&&this.onMouseDown(new createjs.MouseEvent("onMouseDown",i.x,i.y,this,t,e,e==this._primaryPointerID,i.rawX,i.rawY));if(n=this._getObjectsUnderPoint(i.x,i.y,null,this._mouseOverIntervalID?3:1))n.onPress&&(e=new createjs.MouseEvent("onPress",i.x,i.y,n,t,e,e==this._primaryPointerID,i.rawX,i.rawY),n.onPress(e),e.onMouseMove||e.onMouseUp)&&(i.event=e),i.target=n},t._testMouseOver=function(){if(this._primaryPointerID==-1&&(this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var e=null;this.mouseInBounds&&(e=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,3),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY),this._mouseOverTarget!=e&&(this._mouseOverTarget&&this._mouseOverTarget.onMouseOut&&this._mouseOverTarget.onMouseOut(new createjs.MouseEvent("onMouseOut",this.mouseX,this.mouseY,this._mouseOverTarget)),e&&e.onMouseOver&&e.onMouseOver(new createjs.MouseEvent("onMouseOver",this.mouseX,this.mouseY,e)),this._mouseOverTarget=e)}},t._handleDoubleClick=function(e){this.onDoubleClick&&this.onDoubleClick(new createjs.MouseEvent("onDoubleClick",this.mouseX,this.mouseY,this,e,-1,!0));var t=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,this._mouseOverIntervalID?3:1);t&&t.onDoubleClick&&t.onDoubleClick(new createjs.MouseEvent("onDoubleClick",this.mouseX,this.mouseY,t,e,-1,!0))},createjs.Stage=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.DisplayObject;t.image=null,t.snapToPixel=!0,t.sourceRect=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e){this.DisplayObject_initialize(),typeof e=="string"?(this.image=new Image,this.image.src=e):this.image=e},t.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.image&&(this.image.complete||this.image.getContext||this.image.readyState>=2)},t.DisplayObject_draw=t.draw,t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;var n=this.sourceRect;return n?e.drawImage(this.image,n.x,n.y,n.width,n.height,0,0,n.width,n.height):e.drawImage(this.image,0,0),!0},t.clone=function(){var t=new e(this.image);return this.cloneProps(t),t},t.toString=function(){return"[Bitmap (name="+this.name+")]"},createjs.Bitmap=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.DisplayObject;t.onAnimationEnd=null,t.currentFrame=-1,t.currentAnimation=null,t.paused=!0,t.spriteSheet=null,t.snapToPixel=!0,t.offset=0,t.currentAnimationFrame=0,t._advanceCount=0,t._animation=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e){this.DisplayObject_initialize(),this.spriteSheet=e},t.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.spriteSheet.complete&&this.currentFrame>=0},t.DisplayObject_draw=t.draw,t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;this._normalizeFrame();var n=this.spriteSheet.getFrame(this.currentFrame);if(n!=null){var r=n.rect;return e.drawImage(n.image,r.x,r.y,r.width,r.height,-n.regX,-n.regY,r.width,r.height),!0}},t.play=function(){this.paused=!1},t.stop=function(){this.paused=!0},t.gotoAndPlay=function(e){this.paused=!1,this._goto(e)},t.gotoAndStop=function(e){this.paused=!0,this._goto(e)},t.advance=function(){this._animation?this.currentAnimationFrame++:this.currentFrame++,this._normalizeFrame()},t.clone=function(){var t=new e(this.spriteSheet);return this.cloneProps(t),t},t.toString=function(){return"[BitmapAnimation (name="+this.name+")]"},t.DisplayObject__tick=t._tick,t._tick=function(e){var t=this._animation?this._animation.frequency:1;!this.paused&&(++this._advanceCount+this.offset)%t==0&&this.advance(),this.DisplayObject__tick(e)},t._normalizeFrame=function(){var e=this._animation;e?this.currentAnimationFrame>=e.frames.length?(e.next?this._goto(e.next):(this.paused=!0,this.currentAnimationFrame=e.frames.length-1,this.currentFrame=e.frames[this.currentAnimationFrame]),this.onAnimationEnd)&&this.onAnimationEnd(this,e.name):this.currentFrame=e.frames[this.currentAnimationFrame]:this.currentFrame>=this.spriteSheet.getNumFrames()&&(this.currentFrame=0,this.onAnimationEnd)&&this.onAnimationEnd(this,null)},t.DisplayObject_cloneProps=t.cloneProps,t.cloneProps=function(e){this.DisplayObject_cloneProps(e),e.onAnimationEnd=this.onAnimationEnd,e.currentFrame=this.currentFrame,e.currentAnimation=this.currentAnimation,e.paused=this.paused,e.offset=this.offset,e._animation=this._animation,e.currentAnimationFrame=this.currentAnimationFrame},t._goto=function(e){if(isNaN(e)){var t=this.spriteSheet.getAnimation(e);t&&(this.currentAnimationFrame=0,this._animation=t,this.currentAnimation=e,this._normalizeFrame())}else this.currentAnimation=this._animation=null,this.currentFrame=e},createjs.BitmapAnimation=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.DisplayObject;t.graphics=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e){this.DisplayObject_initialize(),this.graphics=e?e:new createjs.Graphics},t.isVisible=function(){return Boolean(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.graphics)},t.DisplayObject_draw=t.draw,t.draw=function(e,t){return this.DisplayObject_draw(e,t)?!0:(this.graphics.draw(e),!0)},t.clone=function(t){return t=new e(t&&this.graphics?this.graphics.clone():this.graphics),this.cloneProps(t),t},t.toString=function(){return"[Shape (name="+this.name+")]"},createjs.Shape=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n){this.initialize(e,t,n)},t=e.prototype=new createjs.DisplayObject;e._workingContext=(createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")).getContext("2d"),t.text="",t.font=null,t.color="#000",t.textAlign="left",t.textBaseline="top",t.maxWidth=null,t.outline=!1,t.lineHeight=0,t.lineWidth=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e,t,n){this.DisplayObject_initialize(),this.text=e,this.font=t,this.color=n?n:"#000"},t.isVisible=function(){return Boolean(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.text!=null&&this.text!=="")},t.DisplayObject_draw=t.draw,t.draw=function(e,t){return this.DisplayObject_draw(e,t)?!0:(this.outline?e.strokeStyle=this.color:e.fillStyle=this.color,e.font=this.font,e.textAlign=this.textAlign||"start",e.textBaseline=this.textBaseline||"alphabetic",this._drawText(e),!0)},t.getMeasuredWidth=function(){return this._getWorkingContext().measureText(this.text).width},t.getMeasuredLineHeight=function(){return this._getWorkingContext().measureText("M").width*1.2},t.getMeasuredHeight=function(){return this._drawText()*(this.lineHeight||this.getMeasuredLineHeight())},t.clone=function(){var t=new e(this.text,this.font,this.color);return this.cloneProps(t),t},t.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},t.DisplayObject_cloneProps=t.cloneProps,t.cloneProps=function(e){this.DisplayObject_cloneProps(e),e.textAlign=this.textAlign,e.textBaseline=this.textBaseline,e.maxWidth=this.maxWidth,e.outline=this.outline,e.lineHeight=this.lineHeight,e.lineWidth=this.lineWidth},t._getWorkingContext=function(){var t=e._workingContext;return t.font=this.font,t.textAlign=this.textAlign||"start",t.textBaseline=this.textBaseline||"alphabetic",t},t._drawText=function(e){var t=!!e;t||(e=this._getWorkingContext());for(var n=String(this.text).split(/(?:\r\n|\r|\n)/),r=this.lineHeight||this.getMeasuredLineHeight(),i=0,s=0,o=n.length;s<o;s++){var u=e.measureText(n[s]).width;if(this.lineWidth==null||u<this.lineWidth)t&&this._drawTextLine(e,n[s],i*r);else{for(var u=n[s].split(/(\s)/),a=u[0],f=1,l=u.length;f<l;f+=2)e.measureText(a+u[f]+u[f+1]).width>this.lineWidth?(t&&this._drawTextLine(e,a,i*r),i++,a=u[f+1]):a+=u[f]+u[f+1];t&&this._drawTextLine(e,a,i*r)}i++}return i},t._drawTextLine=function(e,t,n){this.outline?e.strokeText(t,0,n,this.maxWidth||65535):e.fillText(t,0,n,this.maxWidth||65535)},createjs.Text=e}(),this.createjs=this.createjs||{},function(){var e=function(){throw"SpriteSheetUtils cannot be instantiated"};e._workingCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),e._workingContext=e._workingCanvas.getContext("2d"),e.addFlippedFrames=function(t,n,r,i){if(n||r||i){var s=0;n&&e._flip(t,++s,!0,!1),r&&e._flip(t,++s,!1,!0),i&&e._flip(t,++s,!0,!0)}},e.extractFrame=function(t,n){isNaN(n)&&(n=t.getAnimation(n).frames[0]);var r=t.getFrame(n);if(!r)return null;var i=r.rect,s=e._workingCanvas;return s.width=i.width,s.height=i.height,e._workingContext.drawImage(r.image,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r=new Image,r.src=s.toDataURL("image/png"),r},e.mergeAlpha=function(e,t,n){n||(n=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),n.width=Math.max(t.width,e.width),n.height=Math.max(t.height,e.height);var r=n.getContext("2d");return r.save(),r.drawImage(e,0,0),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),r.restore(),n},e._flip=function(t,n,r,i){for(var s=t._images,o=e._workingCanvas,u=e._workingContext,a=s.length/n,f=0;f<a;f++){var l=s[f];l.__tmp=f,o.width=0,o.width=l.width,o.height=l.height,u.setTransform(r?-1:1,0,0,i?-1:1,r?l.width:0,i?l.height:0),u.drawImage(l,0,0);var h=new Image;h.src=o.toDataURL("image/png"),h.width=l.width,h.height=l.height,s.push(h)}u=t._frames,o=u.length/n;for(f=0;f<o;f++){var l=u[f],p=l.rect.clone(),h=s[l.image.__tmp+a*n],d={image:h,rect:p,regX:l.regX,regY:l.regY};r&&(p.x=h.width-p.x-p.width,d.regX=p.width-l.regX),i&&(p.y=h.height-p.y-p.height,d.regY=p.height-l.regY),u.push(d)}r="_"+(r?"h":"")+(i?"v":""),i=t._animations,t=t._data,s=i.length/n;for(f=0;f<s;f++){u=i[f],l=t[u],a={name:u+r,frequency:l.frequency,next:l.next,frames:[]},l.next&&(a.next+=r),u=l.frames,l=0;for(h=u.length;l<h;l++)a.frames.push(u[l]+o*n);t[a.name]=a,i.push(a.name)}},createjs.SpriteSheetUtils=e}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype;e.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",e.ERR_RUNNING="a build is already running",t.maxWidth=2048,t.maxHeight=2048,t.spriteSheet=null,t.scale=1,t.padding=1,t._frames=null,t._animations=null,t._data=null,t._nextFrameIndex=0,t._index=0,t._callback=null,t._timeSlice=null,t._timerID=null,t._scale=1,t.initialize=function(){this._frames=[],this._animations={}},t.addFrame=function(t,n,r,i,s,o){if(this._data)throw e.ERR_RUNNING;return n=n||t.bounds||t.nominalBounds,!n&&t.getBounds&&(n=t.getBounds()),n?(r=r||1,this._frames.push({source:t,sourceRect:n,scale:r,funct:i,params:s,scope:o,index:this._frames.length,height:n.height*r})-1):null},t.addAnimation=function(t,n,r,i){if(this._data)throw e.ERR_RUNNING;this._animations[t]={frames:n,next:r,frequency:i}},t.addMovieClip=function(t,n,r){if(this._data)throw e.ERR_RUNNING;var i=t.frameBounds,s=n||t.bounds||t.nominalBounds;!s&&t.getBounds&&(s=t.getBounds());if(!s&&!i)return null;for(var n=t.timeline.duration,o=0;o<n;o++)this.addFrame(t,i&&i[o]?i[o]:s,r,function(e){var t=this.actionsEnabled;this.actionsEnabled=!1,this.gotoAndStop(e),this.actionsEnabled=t},[o],t);var o=t.timeline._labels,t=[],u;for(u in o)t.push({index:o[u],label:u});if(t.length){t.sort(function(e,t){return e.index-t.index}),o=0;for(u=t.length;o<u;o++){for(var r=t[o].label,i=o==u-1?n:t[o+1].index,s=[],a=t[o].index;a<i;a++)s.push(a);this.addAnimation(r,s,!0)}}},t.build=function(){if(this._data)throw e.ERR_RUNNING;this._callback=null;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},t.buildAsync=function(t,n){if(this._data)throw e.ERR_RUNNING;this._callback=t,this._startBuild(),this._timeSlice=Math.max(.01,Math.min(.99,n||.3))*50;var r=this;this._timerID=setTimeout(function(){r._run()},50-this._timeSlice)},t.stopAsync=function(){clearTimeout(this._timerID),this._data=null},t.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},t.toString=function(){return"[SpriteSheetBuilder]"},t._startBuild=function(){var t=this.padding||0;this.spriteSheet=null,this._index=0,this._scale=this.scale;var n=[];this._data={images:[],frames:n,animations:this._animations};var r=this._frames.slice();r.sort(function(e,t){return e.height<=t.height?-1:1});if(r[r.length-1].height+t*2>this.maxHeight)throw e.ERR_DIMENSIONS;for(var i=0,s=0,o=0;r.length;){var u=this._fillRow(r,i,o,n,t);u.w>s&&(s=u.w),i+=u.h;if(!u.h||!r.length){var a=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");a.width=this._getSize(s,this.maxWidth),a.height=this._getSize(i,this.maxHeight),this._data.images[o]=a,u.h||(s=i=0,o++)}}},t._getSize=function(e,t){for(var n=4;Math.pow(2,++n)<e;);return Math.min(t,Math.pow(2,n))},t._fillRow=function(t,n,r,i,s){var o=this.maxWidth,u=this.maxHeight-n,a=s;n+=s;for(var f=0,l=t.length-1;l>=0;l--){var h=t[l],p=this._scale*h.scale,d=h.sourceRect,v=h.source,m=Math.floor(p*d.x-s),g=Math.floor(p*d.y-s),y=Math.ceil(p*d.height+s*2),d=Math.ceil(p*d.width+s*2);if(d>o)throw e.ERR_DIMENSIONS;y>u||a+d>o||(h.img=r,h.rect=new createjs.Rectangle(a,n,d,y),f=f||y,t.splice(l,1),i[h.index]=[a,n,d,y,r,Math.round(-m+p*v.regX-s),Math.round(-g+p*v.regY-s)],a+=d)}return{w:a,h:f}},t._endBuild=function(){this.spriteSheet=new createjs.SpriteSheet(this._data),this._data=null,this._callback&&this._callback(this)},t._run=function(){for(var e=(new Date).getTime()+this._timeSlice,t=!1;e>(new Date).getTime();)if(!this._drawNext()){t=!0;break}if(t)this._endBuild();else{var n=this;this._timerID=setTimeout(function(){n._run()},50-this._timeSlice)}},t._drawNext=function(){var e=this._frames[this._index],t=e.scale*this._scale,n=e.rect,r=e.sourceRect,i=this._data.images[e.img].getContext("2d");return e.funct&&e.funct.apply(e.scope,e.params),i.save(),i.beginPath(),i.rect(n.x,n.y,n.width,n.height),i.clip(),i.translate(Math.ceil(n.x-r.x*t),Math.ceil(n.y-r.y*t)),i.scale(t,t),e.source.draw(i),i.restore(),++this._index<this._frames.length},createjs.SpriteSheetBuilder=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.DisplayObject;t.htmlElement=null,t._style=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e){typeof e=="string"&&(e=document.getElementById(e)),this.DisplayObject_initialize(),this.mouseEnabled=!1;if(this.htmlElement=e)this._style=e.style,this._style.position="absolute",this._style.transformOrigin=this._style.WebkitTransformOrigin=this._style.msTransformOrigin=this._style.MozTransformOrigin=this._style.OTransformOrigin="0% 0%"},t.isVisible=function(){return this.htmlElement!=null},t.draw=function(){if(this.htmlElement!=null){var e=this.getConcatenatedMatrix(this._matrix),t=this.htmlElement;return t.style.opacity=""+e.alpha,t.style.visibility=this.visible?"visible":"hidden",t.style.transform=t.style.WebkitTransform=t.style.OTransform=t.style.msTransform=["matrix("+e.a,e.b,e.c,e.d,e.tx+.5|0,(e.ty+.5|0)+")"].join(","),t.style.MozTransform=["matrix("+e.a,e.b,e.c,e.d,(e.tx+.5|0)+"px",(e.ty+.5|0)+"px)"].join(","),!0}},t.cache=function(){},t.uncache=function(){},t.updateCache=function(){},t.hitTest=function(){},t.localToGlobal=function(){},t.globalToLocal=function(){},t.localToLocal=function(){},t.clone=function(){var t=new e;return this.cloneProps(t),t},t.toString=function(){return"[DOMElement (name="+this.name+")]"},t._tick=function(e){this.htmlElement!=null&&(this.htmlElement.style.visibility="hidden",this.onTick)&&this.onTick(e)},createjs.DOMElement=e}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype;t.initialize=function(){},t.getBounds=function(){return new createjs.Rectangle(0,0,0,0)},t.applyFilter=function(){},t.toString=function(){return"[Filter]"},t.clone=function(){return new e},createjs.Filter=e}(),this.createjs=this.createjs||{},function(){var e=function(){throw"Touch cannot be instantiated"};e.isSupported=function(){return"ontouchstart"in window||window.navigator.msPointerEnabled},e.enable=function(t,n,r){return!t||!t.canvas||!e.isSupported()?!1:(t.__touch={pointers:{},multitouch:!n,preventDefault:!r,count:0},"ontouchstart"in window?e._IOS_enable(t):window.navigator.msPointerEnabled&&e._IE_enable(t),!0)},e.disable=function(t){t&&("ontouchstart"in window?e._IOS_disable(t):window.navigator.msPointerEnabled&&e._IE_disable(t))},e._IOS_enable=function(t){var n=t.canvas,r=t.__touch.f=function(n){e._IOS_handleEvent(t,n)};n.addEventListener("touchstart",r,!1),n.addEventListener("touchmove",r,!1),n.addEventListener("touchend",r,!1),n.addEventListener("touchcancel",r,!1)},e._IOS_disable=function(e){var t=e.canvas;t&&(e=e.__touch.f,t.removeEventListener("touchstart",e,!1),t.removeEventListener("touchmove",e,!1),t.removeEventListener("touchend",e,!1),t.removeEventListener("touchcancel",e,!1))},e._IOS_handleEvent=function(e,t){if(e){e.__touch.preventDefault&&t.preventDefault&&t.preventDefault();for(var n=t.changedTouches,r=t.type,i=0,s=n.length;i<s;i++){var o=n[i],u=o.identifier;o.target==e.canvas&&(r=="touchstart"?this._handleStart(e,u,t,o.pageX,o.pageY):r=="touchmove"?this._handleMove(e,u,t,o.pageX,o.pageY):(r=="touchend"||r=="touchcancel")&&this._handleEnd(e,u,t))}}},e._IE_enable=function(t){var n=t.canvas,r=t.__touch.f=function(n){e._IE_handleEvent(t,n)};n.addEventListener("MSPointerDown",r,!1),window.addEventListener("MSPointerMove",r,!1),window.addEventListener("MSPointerUp",r,!1),window.addEventListener("MSPointerCancel",r,!1),t.__touch.preventDefault&&(n.style.msTouchAction="none"),t.__touch.activeIDs={}},e._IE_disable=function(e){var t=e.__touch.f;window.removeEventListener("MSPointerMove",t,!1),window.removeEventListener("MSPointerUp",t,!1),window.removeEventListener("MSPointerCancel",t,!1),e.canvas&&e.canvas.removeEventListener("MSPointerDown",t,!1)},e._IE_handleEvent=function(e,t){if(e){e.__touch.preventDefault&&t.preventDefault&&t.preventDefault();var n=t.type,r=t.pointerId,i=e.__touch.activeIDs;if(n=="MSPointerDown")t.srcElement==e.canvas&&(i[r]=!0,this._handleStart(e,r,t,t.pageX,t.pageY));else if(i[r])if(n=="MSPointerMove")this._handleMove(e,r,t,t.pageX,t.pageY);else if(n=="MSPointerUp"||n=="MSPointerCancel")delete i[r],this._handleEnd(e,r,t)}},e._handleStart=function(e,t,n,r,i){var s=e.__touch;if(s.multitouch||!s.count){var o=s.pointers;o[t]||(o[t]=!0,s.count++,e._handlePointerDown(t,n,r,i))}},e._handleMove=function(e,t,n,r,i){e.__touch.pointers[t]&&e._handlePointerMove(t,n,r,i)},e._handleEnd=function(e,t,n){var r=e.__touch,i=r.pointers;i[t]&&(r.count--,e._handlePointerUp(t,n,!0),delete i[t])},createjs.Touch=e}(),function(e){var t=function(){this.init()};t.prototype={};var n=t.prototype;n.loaded=!1,n.progress=0,n._item=null,n.onProgress=null,n.onLoadStart=null,n.onFileLoad=null,n.onFileProgress=null,n.onComplete=null,n.onError=null,n.getItem=function(){return this._item},n.init=function(){},n.load=function(){},n.cancel=function(){},n._sendLoadStart=function(){this.onLoadStart&&this.onLoadStart({target:this})},n._sendProgress=function(e){var t;if(e instanceof Number)this.progress=e,t={loaded:this.progress,total:1};else if(t=e,this.progress=e.loaded/e.total,isNaN(this.progress)||this.progress==Infinity)this.progress=0;t.target=this,this.onProgress&&this.onProgress(t)},n._sendFileProgress=function(e){this.onFileProgress&&(e.target=this,this.onFileProgress(e))},n._sendComplete=function(){this.onComplete&&this.onComplete({target:this})},n._sendFileComplete=function(e){this.onFileLoad&&(e.target=this,this.onFileLoad(e))},n._sendError=function(e){this.onError&&(e==null&&(e={}),e.target=this,this.onError(e))},n.toString=function(){return"[PreloadJS AbstractLoader]"},e.AbstractLoader=t}(createjs||(createjs={}));var createjs;(function(e){var t=function(e){this.initialize(e)},n=t.prototype=new e.AbstractLoader;t.IMAGE="image",t.SVG="svg",t.SOUND="sound",t.JSON="json",t.JAVASCRIPT="javascript",t.CSS="css",t.XML="xml",t.TEXT="text",t.TIMEOUT_TIME=8e3,n.useXHR=!0,n.stopOnError=!1,n.maintainScriptOrder=!0,n.next=null,n.typeHandlers=null,n.extensionHandlers=null,n._loadStartWasDispatched=!1,n._maxConnections=1,n._currentLoads=null,n._loadQueue=null,n._loadedItemsById=null,n._loadedItemsBySrc=null,n._targetProgress=0,n._numItems=0,n._numItemsLoaded=null,n._scriptOrder=null,n._loadedScripts=null,n.TAG_LOAD_OGGS=!0,n.initialize=function(e){this._targetProgress=this._numItemsLoaded=this._numItems=0,this._paused=!1,this._currentLoads=[],this._loadQueue=[],this._scriptOrder=[],this._loadedScripts=[],this._loadedItemsById={},this._loadedItemsBySrc={},this.typeHandlers={},this.extensionHandlers={},this._loadStartWasDispatched=!1,this.useXHR=e!=0&&window.XMLHttpRequest!=null,this.determineCapabilities()},n.determineCapabilities=function(){var t=e.BrowserDetect;t!=null&&(e.PreloadJS.TAG_LOAD_OGGS=t.isFirefox||t.isOpera)},t.isBinary=function(t){switch(t){case e.PreloadJS.IMAGE:case e.PreloadJS.SOUND:return!0;default:return!1}},n.installPlugin=function(e){if(e!=null&&e.getPreloadHandlers!=null){e=e.getPreloadHandlers();if(e.types!=null)for(var t=0,n=e.types.length;t<n;t++)this.typeHandlers[e.types[t]]=e.callback;if(e.extensions!=null)for(t=0,n=e.extensions.length;t<n;t++)this.extensionHandlers[e.extensions[t]]=e.callback}},n.setMaxConnections=function(e){this._maxConnections=e,this._paused||this._loadNext()},n.loadFile=function(e,t){e==null?this._sendError({text:"File is null."}):(this._addItem(e),t!==!1&&this.setPaused(!1))},n.loadManifest=function(e,t){var n;if(e instanceof Array){if(e.length==0){this._sendError({text:"Manifest is empty."});return}n=e}else{if(e==null){this._sendError({text:"Manifest is null."});return}n=[e]}for(var r=0,i=n.length;r<i;r++)this._addItem(n[r],!1);t!==!1&&this._loadNext()},n.load=function(){this.setPaused(!1)},n.getResult=function(e){return this._loadedItemsById[e]||this._loadedItemsBySrc[e]},n.setPaused=function(e){(this._paused=e)||this._loadNext()},n.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._currentLoads=[],this._scriptOrder=[],this._loadedScripts=[]},n._addItem=function(t){t=this._createLoadItem(t),t!=null&&(this._loadQueue.push(t),this._numItems++,this._updateProgress(),t.getItem().type==e.PreloadJS.JAVASCRIPT&&(this._scriptOrder.push(t.getItem()),this._loadedScripts.push(null)))},n._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded&&(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load.apply(this.next));for(;this._loadQueue.length&&this._currentLoads.length<this._maxConnections;)this._loadItem(this._loadQueue.shift())}},n._loadItem=function(t){t.onProgress=e.PreloadJS.proxy(this._handleProgress,this),t.onComplete=e.PreloadJS.proxy(this._handleFileComplete,this),t.onError=e.PreloadJS.proxy(this._handleFileError,this),this._currentLoads.push(t),t.load()},n._handleFileError=function(e){var e=e.target,t=this._createResultData(e.getItem());this._numItemsLoaded++,this._updateProgress(),this._sendError(t),this.stopOnError||(this._removeLoadItem(e),this._loadNext())},n._createResultData=function(e){var t={id:e.id,result:null,data:e.data,type:e.type,src:e.src};return this._loadedItemsById[e.id]=t,this._loadedItemsBySrc[e.src]=t},n._handleFileComplete=function(t){var t=t.target,n=t.getItem(),r=this._createResultData(n);this._removeLoadItem(t),r.result=t instanceof e.XHRLoader?this._createResult(n,t.getResult()):n.tag;switch(n.type){case e.PreloadJS.IMAGE:if(t instanceof e.XHRLoader){var i=this;r.result.onload=function(){i._handleFileTagComplete(n,r)};return}break;case e.PreloadJS.JAVASCRIPT:if(this.maintainScriptOrder){this._loadedScripts[this._scriptOrder.indexOf(n)]=n,this._checkScriptLoadOrder(t);return}}this._handleFileTagComplete(n,r)},n._checkScriptLoadOrder=function(){for(var e=this._loadedScripts.length,t=0;t<e;t++){var n=this._loadedScripts[t];if(n===null)break;if(n!==!0){var r=this.getResult(n.src),n=this.getResult(n.id);n.result=r.result,this._handleFileTagComplete(r,n),this._loadedScripts[t]=!0,t--,e--}}},n._handleFileTagComplete=function(e,t){this._numItemsLoaded++,e.completeHandler&&e.completeHandler(t),this._updateProgress(),this._sendFileComplete(t),this._loadNext()},n._removeLoadItem=function(e){for(var t=this._currentLoads.length,n=0;n<t;n++)if(this._currentLoads[n]==e){this._currentLoads.splice(n,1);break}},n._createResult=function(t,n){var r=null,i;switch(t.type){case e.PreloadJS.IMAGE:r=this._createImage();break;case e.PreloadJS.SOUND:r=t.tag||this._createAudio();break;case e.PreloadJS.CSS:r=this._createLink();break;case e.PreloadJS.JAVASCRIPT:r=this._createScript();break;case e.PreloadJS.SVG:var r=this._createSVG(),s=this._createXML(n,"image/svg+xml");r.appendChild(s);break;case e.PreloadJS.XML:i=this._createXML(n,"text/xml");break;case e.PreloadJS.JSON:case e.PreloadJS.TEXT:i=n}return r?(t.type==e.PreloadJS.CSS?r.href=t.src:t.type!=e.PreloadJS.SVG&&(r.src=t.src),r):i},n._createXML=function(e,t){var n;return window.DOMParser?(n=new DOMParser,n=n.parseFromString(e,t)):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e)),n},n._handleProgress=function(e){var e=e.target,t=this._createResultData(e.getItem());t.progress=e.progress,this._sendFileProgress(t),this._updateProgress()},n._updateProgress=function(){var e=this._numItemsLoaded/this._numItems,t=this._numItems-this._numItemsLoaded;if(t>0){for(var n=0,r=0,i=this._currentLoads.length;r<i;r++)n+=this._currentLoads[r].progress;e+=n/t*(t/this._numItems)}this._sendProgress({loaded:e,total:1})},n._createLoadItem=function(t){var n={};switch(typeof t){case"string":n.src=t;break;case"object":t instanceof HTMLAudioElement?(n.tag=t,n.src=n.tag.src,n.type=e.PreloadJS.SOUND):n=t}n.ext=this._getNameAfter(n.src,"."),n.type||(n.type=this.getType(n.ext));if(n.id==null||n.id=="")n.id=n.src;if(t=this.typeHandlers[n.type]||this.extensionHandlers[n.ext]){t=t(n.src,n.type,n.id,n.data);if(t===!1)return null;t!==!0&&(t.src!=null&&(n.src=t.src),t.id!=null&&(n.id=t.id),t.tag!=null&&t.tag.load instanceof Function&&(n.tag=t.tag)),n.ext=this._getNameAfter(n.src,".")}t=this.useXHR;switch(n.type){case e.PreloadJS.JSON:case e.PreloadJS.XML:case e.PreloadJS.TEXT:t=!0;break;case e.PreloadJS.SOUND:n.ext=="ogg"&&e.PreloadJS.TAG_LOAD_OGGS&&(t=!1)}return this.useXHR!=1||n.type!=e.PreloadJS.IMAGE&&n.type!=e.PreloadJS.SVG?t?new e.XHRLoader(n):n.tag?new e.TagLoader(n):this._createTagItem(n):(n=this._createTagItem(n),n.useXHR=!0,n)},n._createTagItem=function(t){var n,r="src",i=!1;switch(t.type){case e.PreloadJS.IMAGE:n=this._createImage();break;case e.PreloadJS.SOUND:n=this._createAudio();break;case e.PreloadJS.CSS:r="href",i=!0,n=this._createLink();break;case e.PreloadJS.JAVASCRIPT:i=!0,n=this._createScript();break;case e.PreloadJS.SVG:r="data",n=this._createSVG()}return t.tag=n,new e.TagLoader(t,r,i)},n.getType=function(t){switch(t){case"jpeg":case"jpg":case"gif":case"png":return e.PreloadJS.IMAGE;case"ogg":case"mp3":case"wav":return e.PreloadJS.SOUND;case"json":return e.PreloadJS.JSON;case"xml":return e.PreloadJS.XML;case"css":return e.PreloadJS.CSS;case"js":return e.PreloadJS.JAVASCRIPT;case"svg":return e.PreloadJS.SVG;default:return e.PreloadJS.TEXT}},n._getNameAfter=function(e,t){var n=e.lastIndexOf(t),n=e.substr(n+1),r=n.lastIndexOf(/[\b|\?|\#|\s]/);return r==-1?n:n.substr(0,r)},n._createImage=function(){return document.createElement("img")},n._createSVG=function(){var e=document.createElement("object");return e.type="image/svg+xml",e},n._createAudio=function(){var e=document.createElement("audio");return e.autoplay=!1,e.type="audio/ogg",e},n._createScript=function(){var e=document.createElement("script");return e.type="text/javascript",e},n._createLink=function(){var e=document.createElement("link");return e.type="text/css",e.rel="stylesheet",e},n.toString=function(){return"[PreloadJS]"},t.proxy=function(e,t){return function(n){return e.apply(t,arguments)}},e.PreloadJS=t;var r=function(){};r.init=function(){var e=navigator.userAgent;r.isFirefox=e.indexOf("Firefox")>-1,r.isOpera=window.opera!=null,r.isIOS=e.indexOf("iPod")>-1||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1},r.init(),e.BrowserDetect=r})(createjs||(createjs={})),function(e){var t=function(e,t,n){this.init(e,t,n)},n=t.prototype=new e.AbstractLoader;n._srcAttr=null,n._loadTimeOutTimeout=null,n.tagCompleteProxy=null,n.init=function(t,n,r){this._item=t,this._srcAttr=n||"src",this.useXHR=r==1,this.isAudio=t.tag instanceof HTMLAudioElement,this.tagCompleteProxy=e.PreloadJS.proxy(this._handleTagLoad,this)},n.cancel=function(){this._clean();var e=this.getItem();e!=null&&(e.src=null)},n.load=function(){this.useXHR?this.loadXHR():this.loadTag()},n.loadXHR=function(){var t=this.getItem(),t=new e.XHRLoader(t);t.onProgress=e.PreloadJS.proxy(this._handleProgress,this),t.onFileLoad=e.PreloadJS.proxy(this._handleXHRComplete,this),t.onComplete=e.PreloadJS.proxy(this._handleXHRComplete,this),t.onError=e.PreloadJS.proxy(this._handleLoadError,this),t.load()},n._handleXHRComplete=function(t){this._clean(),t.target.onFileLoad=null,t.target.onComplete=null;var n=t.target.getItem();t.target.getResult(),n.type==e.PreloadJS.IMAGE?(n.tag.onload=e.PreloadJS.proxy(this._sendComplete,this),n.tag.src=n.src):(n.tag[this._srcAttr]=n.src,this._sendComplete())},n._handleLoadError=function(e){e.error&&e.error.code==101?this.loadTag():(this._clean(),this._sendError(e))},n.loadTag=function(){var t=this.getItem(),n=t.tag;clearTimeout(this._loadTimeOutTimeout),this._loadTimeOutTimeout=setTimeout(e.PreloadJS.proxy(this._handleLoadTimeOut,this),e.PreloadJS.TIMEOUT_TIME),this.isAudio&&(n.src=null,n.preload="auto",n.setAttribute("data-temp","true")),n.onerror=e.PreloadJS.proxy(this._handleLoadError,this),n.onprogress=e.PreloadJS.proxy(this._handleProgress,this),this.isAudio?(n.onstalled=e.PreloadJS.proxy(this._handleStalled,this),n.addEventListener("canplaythrough",this.tagCompleteProxy,!1)):n.onload=e.PreloadJS.proxy(this._handleTagLoad,this),n[this._srcAttr]=t.src,t.type==e.PreloadJS.SVG&&document.getElementsByTagName("body")[0].appendChild(n),t=t.type==e.PreloadJS.SOUND&&t.ext=="ogg"&&e.BrowserDetect.isFirefox,n.load!=null&&!t&&n.load()},n._handleLoadTimeOut=function(){this._clean(),this._sendError()},n._handleStalled=function(){},n._handleLoadError=function(){this._clean(),this._sendError()},n._handleTagLoad=function(){var t=this.getItem().tag;clearTimeout(this._loadTimeOutTimeout),this.loaded||this.isAudio&&t.readyState!==4||(this.getItem().type==e.PreloadJS.SVG&&document.getElementsByTagName("body")[0].removeChild(t),this.loaded=!0,this._clean(),this._sendComplete())},n._clean=function(){clearTimeout(this._loadTimeOutTimeout);var e=this.getItem().tag;e.onload=null,e.removeEventListener("canplaythrough",this.tagCompleteProxy,!1),e.onstalled=null,e.onprogress=null,e.onerror=null},n._handleProgress=function(e){clearTimeout(this._loadTimeOutTimeout);if(this.isAudio){e=this.getItem();if(e.buffered==null)return;e={loaded:e.buffered.length>0?e.buffered.end(0):0,total:e.duration}}this._sendProgress(e)},n.toString=function(){return"[PreloadJS TagLoader]"},e.TagLoader=t}(createjs||(createjs={})),function(e){var t=function(e){this.init(e)},n=t.prototype=new e.AbstractLoader;n._wasLoaded=!1,n._request=null,n._loadTimeOutTimeout=null,n._xhrLevel=null,n.init=function(e){this._item=e,this._createXHR(e)},n.getResult=function(){try{return this._request.responseText}catch(e){}return this._request.response},n.cancel=function(){this._clean(),this._request.abort()},n.load=function(){if(this._request==null)this.handleError();else{this._xhrLevel==1&&(this._loadTimeOutTimeout=setTimeout(e.PreloadJS.proxy(this.handleTimeout,this),e.PreloadJS.TIMEOUT_TIME)),this._request.onloadstart=e.PreloadJS.proxy(this.handleLoadStart,this),this._request.onprogress=e.PreloadJS.proxy(this.handleProgress,this),this._request.onabort=e.PreloadJS.proxy(this.handleAbort,this),this._request.onerror=e.PreloadJS.proxy(this.handleError,this),this._request.ontimeout=e.PreloadJS.proxy(this.handleTimeout,this),this._request.onload=e.PreloadJS.proxy(this.handleLoad,this),this._request.onreadystatechange=e.PreloadJS.proxy(this.handleReadyStateChange,this);try{this._request.send()}catch(t){this._sendError({source:t})}}},n.handleProgress=function(e){e.loaded>0&&e.total==0||this._sendProgress({loaded:e.loaded,total:e.total})},n.handleLoadStart=function(){clearTimeout(this._loadTimeOutTimeout),this._sendLoadStart()},n.handleAbort=function(){this._clean(),this._sendError()},n.handleError=function(){this._clean(),this._sendError()},n.handleReadyStateChange=function(){this._request.readyState==4&&this.handleLoad()},n._checkError=function(){switch(parseInt(this._request.status)){case 404:case 0:return!1}return this._hasResponse()||this._hasTextResponse()||this._hasXMLResponse()},n._hasResponse=function(){return this._request.response!=null},n._hasTextResponse=function(){try{return this._request.responseText!=null}catch(e){return!1}},n._hasXMLResponse=function(){try{return this._request.responseXML!=null}catch(e){return!1}},n.handleLoad=function(){this.loaded||(this.loaded=!0,this._checkError()?(this._clean(),this._sendComplete()):this.handleError())},n.handleTimeout=function(){this._clean(),this._sendError()},n._createXHR=function(t){this._xhrLevel=1,window.ArrayBuffer&&(this._xhrLevel=2);if(window.XMLHttpRequest)this._request=new XMLHttpRequest;else try{this._request=new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(n){return null}return t.type==e.PreloadJS.TEXT&&this._request.overrideMimeType&&this._request.overrideMimeType("text/plain; charset=x-user-defined"),this._request.open("GET",t.src,!0),e.PreloadJS.isBinary(t.type)&&(this._request.responseType="arraybuffer"),!0},n._clean=function(){clearTimeout(this._loadTimeOutTimeout);var e=this._request;e.onloadstart=null,e.onprogress=null,e.onabort=null,e.onerror=null,e.onload=null,e.ontimeout=null,e.onloadend=null,e.onreadystatechange=null,clearInterval(this._checkLoadInterval)},n.toString=function(){return"[PreloadJS XHRLoader]"},e.XHRLoader=t}(createjs||(createjs={})),this.createjs=this.createjs||{},function(){var e=function(e,t){this.initialize(e,t)},t=e.prototype;e.NONE=0,e.LOOP=1,e.REVERSE=2,e.IGNORE={},e._tweens=[],e._plugins={},e.get=function(t,n,r){return new e(t,n,r)},e.tick=function(t,n){for(var r=e._tweens.slice(),i=r.length-1;i>=0;i--){var s=r[i];n&&!s.ignoreGlobalPause||s._paused||s.tick(s._useTicks?1:t)}},createjs.Ticker&&createjs.Ticker.addListener(e,!1),e.removeTweens=function(t){if(t.tweenjs_count){for(var n=e._tweens,r=n.length-1;r>=0;r--)n[r]._target==t&&(n[r]._paused=!0,n.splice(r,1));t.tweenjs_count=0}},e.hasActiveTweens=function(t){return t?t.tweenjs_count:e._tweens&&e._tweens.length},e.installPlugin=function(t,n){var r=t.priority;r==null&&(t.priority=r=0);for(var i=0,s=n.length,o=e._plugins;i<s;i++){var u=n[i];if(o[u]){for(var a=o[u],f=0,l=a.length;f<l;f++)if(r<a[f].priority)break;o[u].splice(f,0,t)}else o[u]=[t]}},e._register=function(t,n){var r=t._target;n?(r&&(r.tweenjs_count=r.tweenjs_count?r.tweenjs_count+1:1),e._tweens.push(t)):(r&&r.tweenjs_count--,r=e._tweens.indexOf(t),r!=-1&&e._tweens.splice(r,1))},t.ignoreGlobalPause=!1,t.loop=!1,t.duration=0,t.pluginData=null,t.onChange=null,t.target=null,t.position=null,t._paused=!1,t._curQueueProps=null,t._initQueueProps=null,t._steps=null,t._actions=null,t._prevPosition=0,t._stepPosition=0,t._prevPos=-1,t._target=null,t._useTicks=!1,t.initialize=function(t,n,r){this.target=this._target=t,n&&(this._useTicks=n.useTicks,this.ignoreGlobalPause=n.ignoreGlobalPause,this.loop=n.loop,this.onChange=n.onChange,n.override&&e.removeTweens(t)),this.pluginData=r||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],n&&n.paused?this._paused=!0:e._register(this,!0),n&&n.position!=null&&this.setPosition(n.position,e.NONE)},t.wait=function(e){if(e==null||e<=0)return this;var t=this._cloneProps(this._curQueueProps);return this._addStep({d:e,p0:t,e:this._linearEase,p1:t})},t.to=function(e,t,n){if(isNaN(t)||t<0)t=0;return this._addStep({d:t||0,p0:this._cloneProps(this._curQueueProps),e:n,p1:this._cloneProps(this._appendQueueProps(e))})},t.call=function(e,t,n){return this._addAction({f:e,p:t?t:[this],o:n?n:this._target})},t.set=function(e,t){return this._addAction({f:this._set,o:this,p:[e,t?t:this._target]})},t.play=function(e){return this.call(e.setPaused,[!1],e)},t.pause=function(e){return e||(e=this),this.call(e.setPaused,[!0],e)},t.setPosition=function(e,t){e<0&&(e=0),t==null&&(t=1);var n=e,r=!1;n>=this.duration&&(this.loop?n%=this.duration:(n=this.duration,r=!0));if(n==this._prevPos)return r;if(this._target)if(r)this._updateTargetProps(null,1);else if(this._steps.length>0){for(var i=0,s=this._steps.length;i<s;i++)if(this._steps[i].t>n)break;i=this._steps[i-1],this._updateTargetProps(i,(this._stepPosition=n-i.t)/i.d,n)}return i=this._prevPos,this.position=this._prevPos=n,this._prevPosition=e,t!=0&&this._actions.length>0&&(this._useTicks?this._runActions(n,n):t==1&&n<i?(i!=this.duration&&this._runActions(i,this.duration),this._runActions(0,n,!0)):this._runActions(i,n)),r&&this.setPaused(!0),this.onChange&&this.onChange(this),r},t.tick=function(e){this._paused||this.setPosition(this._prevPosition+e)},t.setPaused=function(t){return this._paused=!!t,e._register(this,!t),this},t.w=t.wait,t.t=t.to,t.c=t.call,t.s=t.set,t.toString=function(){return"[Tween]"},t.clone=function(){throw"Tween can not be cloned."},t._updateTargetProps=function(t,r,i){var s,o,u,a;!t&&r==1?s=o=this._curQueueProps:(t.e&&(r=t.e(r,0,1,1)),s=t.p0,o=t.p1);for(n in this._initQueueProps){(u=s[n])==null&&(s[n]=u=this._initQueueProps[n]),(a=o[n])==null&&(o[n]=a=u),u=u==a||r==0||r==1||typeof u!="number"?r==1?a:u:u+(a-u)*r;var f=!1;if(a=e._plugins[n])for(var l=0,c=a.length;l<c;l++){var h=a[l].tween(this,n,u,s,o,r,i,!t);h==e.IGNORE?f=!0:u=h}f||(this._target[n]=u)}},t._runActions=function(e,t,n){var r=e,i=t,s=-1,o=this._actions.length,u=1;e>t&&(r=t,i=e,s=o,o=u=-1);for(;(s+=u)!=o;){var t=this._actions[s],a=t.t;(a==i||a>r&&a<i||n&&a==e)&&t.f.apply(t.o,t.p)}},t._appendQueueProps=function(t){var n,r,i,s;for(s in t){if(this._initQueueProps[s]==null){r=this._target[s];if(n=e._plugins[s])for(var o=0,u=n.length;o<u;o++)i=n[o].init(this,s,r),i!=e.IGNORE&&(r=i);this._initQueueProps[s]=r}this._curQueueProps[s]=t[s]}return this._curQueueProps},t._cloneProps=function(e){var t={},n;for(n in e)t[n]=e[n];return t},t._addStep=function(e){return e.d>0&&(this._steps.push(e),e.t=this.duration,this.duration+=e.d),this},t._addAction=function(e){return e.t=this.duration,this._actions.push(e),this},t._set=function(e,t){for(var n in e)t[n]=e[n]},createjs.Tween=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n){this.initialize(e,t,n)},t=e.prototype;t.ignoreGlobalPause=!1,t.duration=0,t.loop=!1,t.onChange=null,t.position=null,t._paused=!1,t._tweens=null,t._labels=null,t._prevPosition=0,t._prevPos=-1,t._useTicks=!1,t.initialize=function(e,t,n){this._tweens=[],n&&(this._useTicks=n.useTicks,this.loop=n.loop,this.ignoreGlobalPause=n.ignoreGlobalPause,this.onChange=n.onChange),e&&this.addTween.apply(this,e),this.setLabels(t),n&&n.paused?this._paused=!0:createjs.Tween._register(this,!0),n&&n.position!=null&&this.setPosition(n.position,createjs.Tween.NONE)},t.addTween=function(e){var t=arguments.length;if(t>1){for(var n=0;n<t;n++)this.addTween(arguments[n]);return arguments[0]}return t==0?null:(this.removeTween(e),this._tweens.push(e),e.setPaused(!0),e._paused=!1,e._useTicks=this._useTicks,e.duration>this.duration&&(this.duration=e.duration),this._prevPos>=0&&e.setPosition(this._prevPos,createjs.Tween.NONE),e)},t.removeTween=function(e){var t=arguments.length;if(t>1){for(var n=!0,r=0;r<t;r++)n=n&&this.removeTween(arguments[r]);return n}return t==0?!1:(t=this._tweens.indexOf(e),t!=-1?(this._tweens.splice(t,1),e.duration>=this.duration&&this.updateDuration(),!0):!1)},t.addLabel=function(e,t){this._labels[e]=t},t.setLabels=function(e){this._labels=e?e:{}},t.gotoAndPlay=function(e){this.setPaused(!1),this._goto(e)},t.gotoAndStop=function(e){this.setPaused(!0),this._goto(e)},t.setPosition=function(e,t){e<0&&(e=0);var n=this.loop?e%this.duration:e,r=!this.loop&&e>=this.duration;if(n==this._prevPos)return r;this._prevPosition=e,this.position=this._prevPos=n;for(var i=0,s=this._tweens.length;i<s;i++)if(this._tweens[i].setPosition(n,t),n!=this._prevPos)return!1;return r&&this.setPaused(!0),this.onChange&&this.onChange(this),r},t.setPaused=function(e){this._paused=!!e,createjs.Tween._register(this,!e)},t.updateDuration=function(){for(var e=this.duration=0,t=this._tweens.length;e<t;e++)if(tween=this._tweens[e],tween.duration>this.duration)this.duration=tween.duration},t.tick=function(e){this.setPosition(this._prevPosition+e)},t.resolve=function(e){var t=parseFloat(e);return isNaN(t)&&(t=this._labels[e]),t},t.toString=function(){return"[Timeline]"},t.clone=function(){throw"Timeline can not be cloned."},t._goto=function(e){e=this.resolve(e),e!=null&&this.setPosition(e)},createjs.Timeline=e}(),this.createjs=this.createjs||{},function(){var e=function(){throw"Ease cannot be instantiated."};e.linear=function(e){return e},e.none=e.linear,e.get=function(e){return e<-1&&(e=-1),e>1&&(e=1),function(t){return e==0?t:e<0?t*(t*-e+1+e):t*((2-t)*e+(1-e))}},e.getPowIn=function(e){return function(t){return Math.pow(t,e)}},e.getPowOut=function(e){return function(t){return 1-Math.pow(1-t,e)}},e.getPowInOut=function(e){return function(t){return(t*=2)<1?.5*Math.pow(t,e):1-.5*Math.abs(Math.pow(2-t,e))}},e.quadIn=e.getPowIn(2),e.quadOut=e.getPowOut(2),e.quadInOut=e.getPowInOut(2),e.cubicIn=e.getPowIn(3),e.cubicOut=e.getPowOut(3),e.cubicInOut=e.getPowInOut(3),e.quartIn=e.getPowIn(4),e.quartOut=e.getPowOut(4),e.quartInOut=e.getPowInOut(4),e.quintIn=e.getPowIn(5),e.quintOut=e.getPowOut(5),e.quintInOut=e.getPowInOut(5),e.sineIn=function(e){return 1-Math.cos(e*Math.PI/2)},e.sineOut=function(e){return Math.sin(e*Math.PI/2)},e.sineInOut=function(e){return-0.5*(Math.cos(Math.PI*e)-1)},e.getBackIn=function(e){return function(t){return t*t*((e+1)*t-e)}},e.backIn=e.getBackIn(1.7),e.getBackOut=function(e){return function(t){return--t*t*((e+1)*t+e)+1}},e.backOut=e.getBackOut(1.7),e.getBackInOut=function(e){return e*=1.525,function(t){return(t*=2)<1?.5*t*t*((e+1)*t-e):.5*((t-=2)*t*((e+1)*t+e)+2)}},e.backInOut=e.getBackInOut(1.7),e.circIn=function(e){return-(Math.sqrt(1-e*e)-1)},e.circOut=function(e){return Math.sqrt(1- --e*e)},e.circInOut=function(e){return(e*=2)<1?-0.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},e.bounceIn=function(t){return 1-e.bounceOut(1-t)},e.bounceOut=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},e.bounceInOut=function(t){return t<.5?e.bounceIn(t*2)*.5:e.bounceOut(t*2-1)*.5+.5},e.getElasticIn=function(e,t){var n=Math.PI*2;return function(r){if(r==0||r==1)return r;var i=t/n*Math.asin(1/e);return-(e*Math.pow(2,10*(r-=1))*Math.sin((r-i)*n/t))}},e.elasticIn=e.getElasticIn(1,.3),e.getElasticOut=function(e,t){var n=Math.PI*2;return function(r){if(r==0||r==1)return r;var i=t/n*Math.asin(1/e);return e*Math.pow(2,-10*r)*Math.sin((r-i)*n/t)+1}},e.elasticOut=e.getElasticOut(1,.3),e.getElasticInOut=function(e,t){var n=Math.PI*2;return function(r){var i=t/n*Math.asin(1/e);return(r*=2)<1?-0.5*e*Math.pow(2,10*(r-=1))*Math.sin((r-i)*n/t):e*Math.pow(2,-10*(r-=1))*Math.sin((r-i)*n/t)*.5+1}},e.elasticInOut=e.getElasticInOut(1,.3*1.5),createjs.Ease=e}(),define("createjs/create",function(){}),define("wol/utils",[],function(){window.isFunction=function(e){return!!(e&&e.constructor&&e.call&&e.apply)},window.isArray=function(e){return!!(e&&e.push&&e.splice)}}),define("wol/events",["wol/utils"],function(){function e(){this.list={}}return e.prototype.on=function(e,t){return this.list[e]||(this.list[e]=[]),isFunction(t)&&this.list[e].push(t),this},e.prototype.off=function(e,t){var n;return e===undefined?this.list={}:isFunction(t)?(n=this.list[e])&&n.splice(n.indexOf(t),1):this.list[e]=[],this},e.prototype.emit=function(e,t){var n,r,i;n=this.list[e];if(isArray(n))for(i=0;i<n.length;i++)r=n[i],r.call(this,t);return this},e}),define("wol/wol",["createjs/create","wol/events","wol/utils"],function(e,t){var n=window.createjs;(function(){Function.prototype.bind||(Function.prototype.bind=function(e){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i})})();var r=function(e,t){return setTimeout(t,e)},i={components:{_dictionary:{},add:function(e,t){return this._dictionary[e]||(this._dictionary[e]=t),this},get:function(e){return this._dictionary[e]}},dom:{queryAll:function(e,t){return e.querySelectorAll(t)},query:function(e,t){return e.querySelector(t)},hasClass:function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(e,t){this.hasClass(e,t)||(e.className+=" "+t)},removeClass:function(e,t){if(this.hasClass(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}},first:function(e){return e.firstElementChild},last:function(e){return e.lastElementChild},empty:function(e){return e.innerHTML=""},click:function(e,t){e.addEventListener("click",t)}},display:{add:function(e){i.stage.addChild(e)}},create:{animation:function(e){return new n.BitmapAnimation(e)},container:function(){return new n.Container},bitmap:function(e){return new n.Bitmap(e)},cache:function(e,t,n){return i.debug("displayObject id: "+e.id+" CACHING",t,n),e.cache&&(e.cache(0,0,t,n),i.debug("displayObject id: "+e.id+" CACHED",e)),this}},events:new t,Events:{READY:"wol.ready",PRELOAD_PROGRESS:"wol.preload.progress",GAME_START:"wol.game.start"},spritesheets:{sheets:{},images:{},add:function(e,t){var r,s,o;if(this.sheets[e])return null;s=t.images;for(r=0;r<s.length;r++)o=s[r],o.indexOf(".png")<0?s.splice(r,1):i.resources.add(o);return i.ready(function(){var r,u;for(u=0;u<s.length;u++)if(r=i.resources.get(o))s[u]=r;this.sheets[e]=new n.SpriteSheet(t)}.bind(this)),this},get:function(e){return this.sheets[e]},extract:function(e,t){var r,i=e+"."+t;return r=this.images[i],r===undefined&&(r=n.SpriteSheetUtils.extractFrame(this.get(e),t),this.images[i]=r),r}},resources:{manifest:[],loader:new n.PreloadJS,add:function(e){var t=Array.prototype.slice.call(arguments);for(var n=0;n<t.length;n++)this.manifest.push(t[n])},get:function(e){var t=this.loader.getResult(e);return t===undefined?null:this.loader.getResult(e).result},preload:function(e){this.loader.onProgress=function(){i.events.emit(i.Events.PRELOAD_PROGRESS,this.loader.progress)}.bind(this),this.loader.onComplete=e,this.loader.loadManifest(this.manifest)}},tween:n.Tween,ease:n.Ease,stage:null,game:null,init:function(e,t,s,o,u){i.debug("canvas INITIALIZING");var a=document.createElement("canvas");this.width=a.width=s,this.height=a.height=o,t.appendChild(a),this.stage=new n.Stage(a),this.canvas=a,n.Ticker.useRAF=!0,n.Ticker.setFPS(30),n.Ticker.addListener(this.update.bind(this)),this.pause(),this.makeLoadBars(),this.setDomEvents(),i.debug("preload START"),this.resources.preload(function(){i.debug("preload FINISHED"),i.events.emit(i.Events.READY,i).off(i.Events.READY);var t=1e3;r(t,function(){i.events.emit(i.Events.GAME_START),i.play();var t=new e;u(t)})})},$:function(e,t){return t!==void 0?e.querySelector(t):document.querySelector(e)},makeLoadBars:function(){var e=i.$("#ui .preloader"),t=i.$("#ui .preloader .border"),n=i.$("#ui .preloader .bar"),r=t.clientWidth;i.dom.removeClass(e,"hidden"),i.events.on(i.Events.PRELOAD_PROGRESS,function(e){n.style.width=r*e+"px"}),i.events.on(i.Events.GAME_START,function(){e.style.display="none"})},ready:function(e){i.events.on(i.Events.READY,e)},update:function(){this.stage.update()},pause:function(){return n.Ticker.setPaused(!0),i.debug("game PAUSED"),this},play:function(){return n.Ticker.setPaused(!1),i.debug("game RESUMED"),this},setDomEvents:function(){window.onblur=function(){}.bind(this),window.onfocus=function(){this.paused=!1}.bind(this)},_dcount:0,debug:function(){},isFunction:isFunction,isArray:isArray,wait:r,each:function(e,t){var n,r;for(n=0,r=e.length;n<r;n++)t.call(this,e[n],n);return this}};return function(){var e=!1,t=/xyz/.test(function(){xyz})?/\bparent\b/:/.*/;i.Class=function(){},i.Class.extend=function(n){function u(){!e&&this.init&&this.init.apply(this,arguments)}var r=this.prototype;e=!0;var s=new this;e=!1;for(var o in n)s[o]=typeof n[o]=="function"&&typeof r[o]=="function"&&t.test(n[o])?function(e,t){return function(){var n=this.parent;this.parent=r[e];var i=t.apply(this,arguments);return this.parent=n,i}}(o,n[o]):n[o];return u.prototype=s,u.prototype.constructor=u,u.extend=i.Class.extend,u}}(),i}),define("wol/collection",["wol/wol"],function(e){return e.Collection=e.Class.extend({init:function(){this.dictionary={},this.list=[],this.length=0},add:function(e){e.id&&this.list.indexOf(e)===-1&&(this.list.push(e),this.dictionary[e.id]=e),this.length=this.list.length},remove:function(e){var t=this.list.indexOf(e);t>-1&&(this.list.splice(t,1),delete this.dictionary[e.id]),this.length=this.list.length},get:function(e){return this.dictionary[e]}})}),define("wol/game",["wol/wol"],function(e){return e.Game=e.Class.extend({init:function(){this.container=e.create.container(),e.display.add(this.container)},add:function(e,t){return t===undefined?this.container.addChild(e):e&&t.addChild(e),this}})}),define("wol/tile",["wol/wol"],function(e){return e.Tile=e.Class.extend({init:function(e,t){this.x=e,this.y=t,this.z=e+t,this.f=0,this.g=0,this.h=0,this.parent=null},json:function(){return{x:this.x,y:this.y,z:this.z}},pos:function(){return this.x+"."+this.y}})}),define("wol/grid",["wol/wol","wol/tile"],function(e,t){return e.Grid=e.Class.extend({init:function(){this.columns=0,this.rows=0,this._keys={},this.tiles=[]},generate:function(e,n){var r,i,s;this.columns=e,this.rows=n;for(i=0;i<e;i++){this._keys[i]={};for(r=0;r<n;r++)s=new t(i,r),this._keys[i][r]=s,this.tiles.push(s)}},get:function(e,t){return this._keys[e]?this._keys[e][t]:null}})}),define("game/hexgrid",["wol/wol","wol/grid"],function(e){var t;return t=e.Grid.extend({EAST:"east",WEST:"west",SOUTHEAST:"southEast",NORTHEAST:"northEast",SOUTHWEST:"southWest",NORTHWEST:"northWest",deltaX:function(e,t,n,r){var i;n==null&&(n=1),r==null&&(r=0),i=0;switch(e){case this.EAST:i+=(t?Math.floor(r*.5)*-1:Math.ceil(r*.5)*-1)+n;break;case this.WEST:i+=(t?Math.ceil(r*.5):Math.floor(r*.5))-n;break;case this.SOUTHEAST:i+=(t?Math.ceil(n*.5):Math.floor(n*.5))-r;break;case this.NORTHEAST:i+=Math.floor(n*.5)+r-Math.floor(r*.5),t?n%2&&(n+r)%2&&i++:n%2===0&&(n+r)%2&&i--;break;case this.SOUTHWEST:i-=Math.ceil(n*.5)+r-Math.ceil(r*.5),t?n%2&&(n+r)%2&&i++:n%2===0&&(n+r)%2&&i--;break;case this.NORTHWEST:i+=(t?Math.ceil(n*-0.5):Math.floor(n*-0.5))+r}return i},deltaY:function(e,t,n,r){var i;n==null&&(n=1),r==null&&(r=0),i=0;switch(e){case this.EAST:i+=r;break;case this.WEST:i+=r*-1;break;case this.SOUTHEAST:i+=n;break;case this.SOUTHWEST:i+=n-r;break;case this.NORTHEAST:i+=n*-1+r;break;case this.NORTHWEST:i+=n*-1}return i},delta:function(e,t,n,r,i){var s,o,u,a,f;o=[];for(s=1;1<=i?s<=i:s>=i;1<=i?s++:s--)a=e+this.deltaX(n,r,i,s-1),f=t+this.deltaY(n,r,i,s-1),u=this.get(a,f),u&&o.push(u);return o},neighbors:function(e,t){var n,r,i,s,o,u,a,f,l,c,h;t==null&&(t=1),n=e.x,r=e.y,u=[],o=r%2>0;for(s=1;1<=t?s<=t:s>=t;1<=t?s++:s--)i=this.delta(n,r,this.EAST,o,s),u=u.concat(i),h=this.delta(n,r,this.WEST,o,s),u=u.concat(h),l=this.delta(n,r,this.SOUTHEAST,o,s),u=u.concat(l),a=this.delta(n,r,this.NORTHEAST,o,s),u=u.concat(a),c=this.delta(n,r,this.SOUTHWEST,o,s),u=u.concat(c),f=this.delta(n,r,this.NORTHWEST,o,s),u=u.concat(f);return u},euclidean:function(e,t){var n,r;return n=Math.pow(e.x-t.x,2),r=Math.pow(e.y-t.y,2),Math.sqrt(n+r)}})}),define("game/textures/elements",[],function(){return{images:["media/elements.png",""],frames:[[509,32,18,18],[174,2,84,56],[342,2,80,49],[260,2,80,49],[424,2,83,46],[88,2,84,56],[2,2,84,56],[509,2,26,28]],animations:{aura:[0],hex_bg:[1],hex_player_a:[2],hex_player_b:[3],hex_player_selected:[4],hex_select:[5],hex_target:[6],shield:[7]},texturepacker:["SmartUpdateHash:$TexturePacker:SmartUpdate:ba3d8f228c1f81d7b781f1189eec197e$","CreatedwithTexturePacker(http://www.texturepacker.com)forEasyJS"]}}),define("game/hex",[],function(){return{WIDTH:84,HEIGHT:56,position:function(e,t,n){var r=this.coord(t,n);return e.regX=this.WIDTH*.5,e.regY=this.HEIGHT*.5,e.x=r.x+e.regX,e.y=r.y+e.regY,r},coord:function(e,t){return e===undefined?null:{x:e.x*this.WIDTH+(e.y%2?this.WIDTH*.5:0)+(t?this.WIDTH*.5:0),y:e.y*(this.HEIGHT-this.HEIGHT*.25)+(t?this.HEIGHT*.5:0)}}}}),define("game/components/hexgrid",["wol/wol","wol/tile","wol/events","game/hex"],function(e,t,n,r){e.components.add("hexgrid",function(t){t.addComponent("events"),t.moveDuration=1e3,t.move=function(n){var i,s;e.isArray(n)?(t.emit("hex.move.start"),i=e.tween.get(t.container),e.each(n,function(e,s){var o=r.coord(e,!0),u=n[s-1]||t.tile,a=t.moveDuration*(u.y!=e.y?.75:1);i=i.call(function(){t.container.scaleX=t._currentPos.x>o.x?-1:1,t._currentPos=o,t.tile=e}).to(o,a)}),i.call(function(){t.emit("hex.move.end")})):(t.tile=n,s=r.coord(n,!0),t.container.x=s.x,t.container.y=s.y,t._currentPos=s)}})}),define("game/components/hextile",["wol/wol"],function(e){var t=e.Class.extend({init:function(){this._list=[],this._dict={},this.add("move"),this.add("range"),this.add("selected"),this.add("playerSide")},add:function(e){var t=[];this._list.indexOf(e)===-1&&(this._dict[e]=t,this._list.push(e))},get:function(e){return this._dict[e]},set:function(t,n){return e.isArray(n)&&(this._dict[t]=n),n},clear:function(t,n){var r;for(var i=0,s=this._list.length;i<s;i++){r=this._list[i];if(t===void 0||t.indexOf(r)>-1)e.isFunction(n)&&n(this.get(r)),this._dict[r]=[]}}});return e.components.add("hextile",function(e){e.hexTiles=new t}),e}),define("game/stat",[],function(){function e(e,t){this.name=e,this.value=t,this.max=t}return e.prototype.setMax=function(e){this.value=e,this.max=e},e.prototype.setValue=function(e){return this.value=Math.min(Math.max(0,e),this.max)},e.prototype.reset=function(){this.value=this.max},e.prototype.empty=function(){this.value=0},e}),define("game/stats",["game/stat"],function(e){function t(e){this.list=[],this.dictionary={},this.set(e)}return t.prototype.add=function(e){e&&(this.list.push(e),this.dictionary[e.name]=e)},t.prototype.set=function(t){var n,r;for(var i in t)r=t[i],r.max&&(r=r.max),(n=this.get(i))?n.setMax(r):this.add(new e(i,r))},t.prototype.toJSON=function(){var e={};for(var t=0;t<this.list.length;t++)stat=this.list[t],e[stat.name]={value:stat.value,max:stat.max};return e},t.prototype.get=function(e){return this.dictionary[e]},t}),define("game/components/stats",["wol/wol","game/stats"],function(e,t){e.components.add("stats",function(e){e.stats=new t})}),define("game/components/unit",["wol/wol","game/components/stats"],function(e){e.components.add("unit",function(e){e.addComponent("events"),e.addComponent("stats"),e.metaData=function(e,t,n,r){this.id=e,this.name=n,this.code=t,this.playerId=r},e.attack=function(t){e.emit("unit.attack.start"),t&&t.defend(e)},e.defend=function(t){if(this===t)return;e.emit("unit.defend.start")},e.hit=function(t){e.emit("unit.hit",t)},e.die=function(t){e.emit("unit.die",t)},e.hide=function(){e.container.visible=!1},e.show=function(){e.container.visible=!0},e.disable=function(){e.disabled=!0},e.enable=function(){e.disabled=!1}})}),define("wol/keys",["wol/wol","wol/events"],function(e,t){e.KeyCodes={MAC_ENTER:3,BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,CAPS_LOCK:20,ESC:27,SPACE:32,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,MAC_FF_META:224,PHANTOM:255};var n=new t;return e.keys={on:function(e,t){return n.on(e,t),this},off:function(e,t){return n.off(e,t),this},emit:function(e,t){return n.emit(e,t),this}},document.addEventListener("keydown",function(t){e.keys.emit(t.keyCode)}),e.keys}),define("game/base",["wol/wol","wol/game","game/hexgrid","game/textures/elements","game/hex","game/components/hexgrid","game/components/hextile","game/components/unit","game/components/stats","wol/keys"],function(e,t,n,r,i,s,o,u,a,f){var l="media/background.png";return e.resources.add(l),e.spritesheets.add("elements",r),t.extend({hexgrid:new n,background:null,hexContainer:e.create.container(),unitContainer:e.create.container(),columns:9,rows:9,cachedTextures:{},init:function(){this.parent(),this.background=e.create.bitmap(e.resources.get(l)),this.add(this.background),this.add(this.hexContainer),this.add(this.unitContainer),this.hexgrid.generate(this.columns,this.rows),this.createStaticGridDisplay(this.hexgrid)},addEntity:function(e,t,n,r,i){return e.addComponent("hexgrid"),e.addComponent("unit"),e.addComponent("hextile"),e.metaData(t,n,r,i),e.hide(),this.add(e.container,this.unitContainer),this},createStaticGridDisplay:function(t){var n,r,i,s,o,u,a=this;n=0,u=e.create.container(),this.createTiles(this.hexgrid.tiles,"hex_bg",function(e){a.add(e,u)}),e.wait(0,function(){e.create.cache(u,e.width,e.height)}),this.add(u,this.hexContainer)},createTiles:function(t,n,r){var s,o,u,a;n||(n="hex_select"),s=this.cachedTextures[n]||(this.cachedTextures[n]=e.spritesheets.extract("elements",n)),a=[];for(var f=t.length-1;f>=0;f--)u=t[f],o=e.create.bitmap(s),a.push(o),i.position(o,u),e.isFunction(r)&&r.call(this,o,f);return a},findNearestPath:function(e,t){var n,r,i,s,o,u,a,f,l;n=[e],r=[];while(n.length){var c=0;for(f=0,l=n.length;f<l;f++)n[f].f<n[c].f&&(c=f);i=n[c];if(i.pos()===t.pos()){var h=i,p,d=[];while(h.parent)d.push(h),p=h.parent,h.parent=null,h=p;return d.reverse()}n.splice(i,1),r.push(i),s=this.hexgrid.neighbors(i);for(f=0,l=s.length;f<l;f++){o=s[f];if(r.indexOf(o)>-1)continue;u=i.g+1,a=!1,n.indexOf(o)===-1?(a=!0,o.h=this.hexgrid.euclidean(o,t),n.push(o)):u<o.g&&(a=!0),a&&(o.parent=i,o.g=u,o.f=o.g+o.h)}}return[]}})}),define("wol/entity",["wol/wol","wol/events"],function(e,t){return e.components.add("spritesheet",function(t,n){var r=e.create.animation(n);t.container.addChild(r),t.play=function(e){return r.gotoAndPlay.apply(r,arguments),t},t.stop=function(e){return r.gotoAndStop.apply(r,arguments),t},t.sequence=function(e,n){var i;if(i=r.spriteSheet.getAnimation(e))i.next=n;return t}}),e.components.add("events",function(e){var n=new t;e.on=function(e,t){n.on(e,t)},e.off=function(e,t){n.off(e,t)},e.emit=function(){n.emit.apply(n,arguments)}}),e.Entity=e.Class.extend({init:function(){this._components=[],this.container=e.create.container()},LEFT:"left",RIGHT:"right",flip:function(e){this.container.scaleX=e===this.LEFT?-1:1},addComponent:function(t){var n,r;if(this._components.indexOf(t)>-1)return this;if(n=e.components.get(t))r=Array.prototype.slice.call(arguments),r.splice(0,1),r.splice(0,0,this),n.apply(this,r),this._components.push(t)}})}),define("game/textures/marine",[],function(){return{images:["media/marine.png"],animations:{hit:[85,89],dieStart:[99,122],attack:[42,77],defendEnd:[90,98],defendStart:[78,83],all:[0,0],move:[23,34],defendHold:[84,84],idle:[1,19],moveEnd:[35,41],moveStart:[20,22]},frames:{height:97,count:123,regY:76,width:113,regX:34}}}),define("game/entities/marine",["wol/wol","wol/entity","game/textures/marine","game/components/hexgrid"],function(e,t,n){var r="game.entities.marine";return n.frames.regX=30,n.frames.regY=77,e.spritesheets.add(r,n),e.Entity.extend({init:function(){this.parent();var t=this;this.addComponent("spritesheet",e.spritesheets.get(r)),this.addComponent("events"),this.addComponent("hexgrid"),this.moveDuration=500,this.sequence("moveStart","move").sequence("moveEnd","idle").sequence("attack","idle").sequence("defendStart","defendHold").sequence("hit","defendHold").sequence("dieStart","dieEnd"),this.play("idle"),this.on("hex.move.start",function(){t.play("moveStart")}),this.on("hex.move.end",function(){t.play("moveEnd")}),this.on("unit.attack.start",function(){t.play("attack")}),this.on("unit.defend.start",function(){t.play("defendStart")}),this.on("unit.hit",function(){t.play("hit")}),this.on("unit.die",function(){t.play("dieStart")})}})}),define("game/main",["wol/wol","wol/collection","game/base","game/entities/marine","wol/events"],function(e,t,n,r,i){return n.extend({players:new e.Collection,units:new e.Collection,player:{name:null,id:null},unitClasses:{marine:r},activeUnit:null,init:function(){this.parent(),this.hexContainer.y=this.unitContainer.y=150,this.hexContainer.x=this.unitContainer.x=80;var e=new i;this.on=e.on.bind(e),this.off=e.off.bind(e),this.emit=e.emit.bind(e)},addPlayer:function(e){this.players.add({id:e.id,name:e.name})},unitSpawn:function(e){var t=e.id,n=e.name,r=e.code,i=e.stats,s=e.x,o=e.y,u=e.playerId,a=this,f=this.unitClasses[r];if(f){var l=new f,c=this.hexgrid.get(s,o);this.addEntity(l,t,r,n,u),this.units.add(l),l.stats.set(i),l.move(c),l.flip(e.direction),l.show(),this.updateUnit(l)}},updateUnit:function(e){var t=this,n;n=e.playerId===this.player.id?"hex_player_a":"hex_player_b";var r=this.createTiles([e.tile],n,function(e){t.add(e,t.hexContainer)});this.setHexTiles(e,"playerSide",r),this.emit("unit.update",e)},unitMove:function(t,n,r){var i=this,s=t.tile,o=this.findNearestPath(s,n);o=[s].concat(o);var u=this.createTiles(o,"hex_target",function(e,t){i.add(e,i.hexContainer)});this.setHexTiles(t,"move",u);var a=function(){t.off("hex.move.end",a),i.clearHexTiles(t),i.updateUnit(t),e.isFunction(r)&&r()};t.on("hex.move.end",a),o.splice(0,1),t.move(o)},unitRange:function(e){var t,n,r=this,i=this.hexContainer;if(!e.disabled&&e.hexTiles.get("range").length===0){t=e.stats.get("range").value,n=this.hexgrid.neighbors(e.tile,t);var s=this.createTiles(n,"hex_select",function(t,s){var o=n[s];r.add(t,i),t.onClick=function(){e.disable(),r.clearHexTiles(e),r.unitMove(e,o,function(){r.actUnit(e),r.checkTurn(e)})}});this.setHexTiles(e,"range",s)}},actUnit:function(e,t){t||(t=1);var n,r;e&&(n=e.stats.get("actions"),r=n.value-t,n.setValue(r))},checkTurn:function(e){if(e===this.activeUnit){var t;t=e.stats.get("actions"),this.emit("unit.update",e),t.value>0&&e.enable()}},clearHexTiles:function(e,t){var n=this;e.hexTiles.clear(t,function(e){n.hexContainer.removeChild.apply(n.hexContainer,e)})},setHexTiles:function(e,t,n){this.clearHexTiles(e),e.hexTiles.set(t,n)}})}),function(e,t){var n=function(e,t,r){return arguments.length===1?n.get(e):n.set(e,t,r)};n.get=function(t){return e.cookie!==n._cacheString&&n._populateCache(),n._cache[t]},n.defaults={path:"/"},n.set=function(r,i,s){var s={path:s&&s.path||n.defaults.path,domain:s&&s.domain||n.defaults.domain,expires:s&&s.expires||n.defaults.expires,secure:s&&s.secure!==t?s.secure:n.defaults.secure};i===t&&(s.expires=-1);switch(typeof s.expires){case"number":s.expires=new Date((new Date).getTime()+s.expires*1e3);break;case"string":s.expires=new Date(s.expires)}var o=encodeURIComponent(r)+"="+(i+"").replace(/[^!#-+\--:<-[\]-~]/g,encodeURIComponent);return o+=s.path?";path="+s.path:"",o+=s.domain?";domain="+s.domain:"",o+=s.expires?";expires="+s.expires.toGMTString():"",o+=s.secure?";secure":"",e.cookie=o,n},n.expire=function(e,r){return n.set(e,t,r)},n._populateCache=function(){n._cache={},n._cacheString=e.cookie;var r=n._cacheString.split("; ");for(var i=0;i<r.length;i++){var s=r[i].indexOf("="),o=decodeURIComponent(r[i].substr(0,s)),u=decodeURIComponent(r[i].substr(s+1));n._cache[o]===t&&(n._cache[o]=u)}},n.enabled=function(){var e=n.set("cookies.js","1").get("cookies.js")==="1";return n.expire("cookies.js"),e}(),typeof define=="function"&&define.amd?define("cookies",[],function(){return n}):typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=n),exports.Cookies=n):window.Cookies=n}(document),require(["wol/wol","game/main","cookies","wol/keys"],function(e,t,n,r){function h(){a=io.connect(),a.on("player.data",C).on("game.join",T).on("game.start",N).on("player.add",S),k()}function p(t){u=t,u.player=f,u.on("unit.update",m),l.forEach(u.addPlayer.bind(u)),a.on("unit.spawn",b).on("unit.skip",v).on("unit.turn",y).on("units.turn.list",g),e.dom.click(e.$("#unit-actions .move.command"),x),e.dom.click(e.$("#unit-actions .skip.command"),d),e.keys.on(e.KeyCodes.V,x),E("ready")}function d(){if(u.activeUnit.playerId===f.id){E("unit.skip",u.activeUnit.id);var t=e.$("#unit-actions");e.dom.addClass(t,"hidden")}}function v(e){var t;(t=u.units.get(e.id))&&u.clearHexTiles(t)}function m(t){if(t===u.activeUnit){var n=e.$("#unit-actions"),r=e.dom.query(n,".bars"),i=t.stats.get("actions"),s=e.dom.queryAll(r,".bar:not(.empty)"),o=s.length-i.value;while(o>0)e.dom.addClass(s[s.length-o],"empty"),o--}}function g(t){var n=t.turnList,r=e.$("#turn-list"),i=e.$(r,"ul"),s,o;i.innerHTML="";for(var a=0,f=n.length;a<f;a++){o=n[a];if(s=u.units.get(o))i.innerHTML+=c.turnList({code:s.code})}e.dom.removeClass(r,"hidden")}function y(t){var n=t.id,r;if(r=u.units.get(n)){u.activeUnit=r,r.tileStart=r.tile,r.stats.get("actions").reset(),u.clearHexTiles(r);var i=u.createTiles([r.tile],"hex_player_selected",function(e){u.hexContainer.addChild(e)});r.hexTiles.set("selected",i);if(r.playerId===f.id){var s=e.$("#unit-actions"),o=r.stats.get("health");e.$(s,".health .value").textContent=o.value+"/"+o.max,e.dom.removeClass(s,"hidden");var a=e.$(s,".avatar");e.dom.removeClass(a),e.dom.addClass(a,"avatar"),e.dom.addClass(a,r.code);var l=r.stats.get("actions"),h=e.$(s,".actions .bars"),p=100/l.max;e.dom.empty(h);for(var d=0;d<l.max;d++)h.innerHTML+=c.actionBar(),e.dom.last(h).style.width=p+"%"}}}function b(e){u.unitSpawn(e)}function w(t){var n=t.id,r;if(r=u.units.get(n))e.each(r.hexTiles,function(e){u.hexContainer.removeChild(e)}),r.hexTiles=[]}function E(e,t){console.log(arguments),a.emit(e,t)}function S(e){console.log("addPlayer",e),l.push(e)}function x(){var e;(e=u.activeUnit)&&u.unitRange(e)}function T(e){var t=e.id}function N(n){var r=n.id;u||(console.log("starting game"),e.init(t,o,960,640,p))}function C(e){f.id=e.id,f.name=e.name,f.authKey=e.authKey,n.set("wol_id",f.authKey),E("game.find")}function k(){var t=n.get("wol_id");E("auth",{authKey:t}),e.wait(1e3,function(){E("player.set.name",{name:i})})}var i=navigator.vendor.replace(/(^\w+).+/,function(e,t){return t}),s=document.getElementById("main"),o=document.getElementById("game"),u=null,a=null,f={},l=[],c={sub:function(e,t){var n=e;for(var r in t)n=n.replace("{{"+r+"}}",t[r]);return n},turnList:function(e){return this.sub("<li class='avatar {{code}}'></li>",e)},actionBar:function(e){return this.sub("<div class='bar'></div>",e)}};h()}),define("app",function(){})